<!-- magnets/guide.html -->
<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>The Ultimate Guide to IRS Transcript Codes</title>

  <!-- Tailwind (CDN). Yes, we are keeping it. -->
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['DM Sans', 'ui-sans-serif', 'system-ui', '-apple-system', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial']
          },
          colors: {
            'brand-lavender': '#E9D5FF',
            'brand-purple': '#5B21B6'
          }
        }
      }
    };
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.min.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="/styles/site.css?v=1" />
  <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
  <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />

  <script>
    if (typeof pdfjsLib !== 'undefined') {
      pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.worker.min.js";
    }
  </script>

  <style>
    @keyframes tmFadeUp {
      0% { opacity: 0; transform: translateY(14px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .tm-anim { opacity: 0; transform: translateY(14px); }
    .tm-loaded .tm-anim { animation: tmFadeUp 700ms ease forwards; }
    .tm-loaded .tm-anim.delay-1 { animation-delay: 80ms; }
    .tm-loaded .tm-anim.delay-2 { animation-delay: 160ms; }
    .tm-loaded .tm-anim.delay-3 { animation-delay: 240ms; }

    @media (prefers-reduced-motion: reduce) {
      .tm-anim { opacity: 1 !important; transform: none !important; }
      .tm-loaded .tm-anim { animation: none !important; }
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'DM Sans', sans-serif;
    }

    body {
      background: #ffffff;
      color: #1f2937;
    }

    .page-container {
      max-width: 80rem; /* matches Tailwind max-w-7xl */
      margin: 0 auto;
      padding-left: 1.5rem; /* matches px-6 */
      padding-right: 1.5rem; /* matches px-6 */
      background: #ffffff;
    }

    .section-divider {
      border-left: 4px solid #5B21B6;
      padding-left: 1.5rem;
      margin: 3rem 0;
    }

    .hero-section {
      background: linear-gradient(135deg, #f3e8ff 0%, #faf5ff 100%);
      padding: 4rem 2rem;
      text-align: center;
      border-bottom: 1px solid #e9d5ff;
      border-radius: 12px;
    }

    .hero-title {
      font-size: 2.5rem;
      font-weight: 700;
      color: #5B21B6;
      margin: 0 0 1rem 0;
      line-height: 1.2;
    }

    .hero-subtitle {
      font-size: 1.25rem;
      color: #7c3aed;
      margin: 0 0 1.5rem 0;
      font-weight: 500;
    }

    .hero-intro {
      font-size: 1rem;
      color: #4b5563;
      max-width: 600px;
      margin: 1.5rem auto 2.5rem;
      line-height: 1.6;
    }

    .btn-download {
      background: linear-gradient(135deg, #5B21B6 0%, #7c3aed 100%);
      color: white;
      font-weight: 600;
      padding: 0.875rem 2rem;
      border-radius: 0.5rem;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
      display: inline-block;
      text-decoration: none;
    }

    .btn-download:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(91, 33, 182, 0.3);
    }

    .code-card {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-left: 4px solid #5B21B6;
      border-radius: 0.5rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      transition: all 0.3s ease;
    }

    .code-card:hover {
      box-shadow: 0 4px 12px rgba(91, 33, 182, 0.1);
      border-left-color: #7c3aed;
    }

    .code-card.hidden {
      display: none !important;
    }

    .code-number {
      font-size: 1.5rem;
      font-weight: 700;
      color: #5B21B6;
      margin-bottom: 0.5rem;
      font-family: 'Courier New', monospace;
    }

    .code-title {
      font-size: 1rem;
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 0.75rem;
    }

    .code-row {
      display: grid;
      grid-template-columns: 120px 1fr;
      gap: 1rem;
      margin-bottom: 0.75rem;
      font-size: 0.95rem;
    }

    .code-label {
      font-weight: 600;
      color: #5B21B6;
      text-transform: uppercase;
      font-size: 0.75rem;
      letter-spacing: 0.5px;
    }

    .code-value {
      color: #4b5563;
      line-height: 1.5;
    }

    .risk-badge {
      display: inline-block;
      padding: 0.375rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-top: 1rem;
    }

    .risk-immediate { background: #fee2e2; color: #991b1b; }
    .risk-low { background: #dcfce7; color: #166534; }
    .risk-moderate { background: #fef3c7; color: #92400e; }

    .scenario-card {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 0.5rem;
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .scenario-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 1rem;
    }

    .scenario-codes {
      background: #f3e8ff;
      border-left: 3px solid #5B21B6;
      padding: 1rem;
      border-radius: 0.375rem;
      margin: 1.5rem 0;
      font-family: 'Courier New', monospace;
      font-size: 0.95rem;
      color: #5B21B6;
      font-weight: 600;
    }

    .scenario-annotation {
      background: #ffffff;
      border-left: 3px solid #7c3aed;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 0.375rem;
    }

    .annotation-label {
      font-size: 0.75rem;
      font-weight: 700;
      color: #7c3aed;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.5rem;
    }

    .annotation-text {
      font-size: 0.95rem;
      color: #4b5563;
      line-height: 1.6;
    }

    .red-flag-card {
      border: 2px solid #fee2e2;
      border-left: 4px solid #dc2626;
      background: #fef2f2;
      border-radius: 0.5rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .red-flag-code {
      font-size: 1.25rem;
      font-weight: 700;
      color: #991b1b;
      font-family: 'Courier New', monospace;
      margin-bottom: 0.5rem;
    }

    .red-flag-title {
      font-size: 1rem;
      font-weight: 600;
      color: #7f1d1d;
      margin-bottom: 0.75rem;
    }

    .red-flag-action {
      background: #ffffff;
      border-left: 2px solid #dc2626;
      padding: 0.75rem;
      margin-top: 0.75rem;
      border-radius: 0.375rem;
      font-size: 0.95rem;
      color: #4b5563;
    }

    .reference-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      margin-top: 1.5rem;
    }

    .reference-table thead {
      background: #f3e8ff;
      border-bottom: 2px solid #5B21B6;
    }

    .reference-table th {
      padding: 1rem;
      text-align: left;
      font-weight: 700;
      color: #5B21B6;
      text-transform: uppercase;
      font-size: 0.75rem;
      letter-spacing: 0.5px;
    }

    .reference-table td {
      padding: 0.875rem 1rem;
      border-bottom: 1px solid #e5e7eb;
      color: #4b5563;
    }

    .reference-table tbody tr:hover { background: #f9fafb; }
    .reference-table tbody tr:nth-child(even) { background: #fafbfc; }

    .category-section { margin-bottom: 3rem; }

    .category-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1f2937;
      margin-bottom: 0.25rem;
      padding-left: 1.5rem;
      border-left: 4px solid #5B21B6;
    }

    .category-description {
      color: #6b7280;
      font-size: 0.95rem;
      margin-bottom: 1.5rem;
      margin-left: 1.5rem;
    }

    .footer-section {
      background: #f9fafb;
      border-top: 1px solid #e5e7eb;
      padding: 3rem 2rem;
      text-align: center;
      margin-top: 4rem;
    }

    .footer-disclaimer {
      font-size: 0.85rem;
      color: #6b7280;
      line-height: 1.6;
      max-width: 700px;
      margin: 0 auto 1.5rem;
    }

    .footer-contact {
      font-size: 0.9rem;
      color: #5B21B6;
      font-weight: 600;
    }

    .section-padding { padding: 2rem; }

    .search-box {
      background: #f3e8ff;
      border: 2px solid #e9d5ff;
      padding: 1.5rem;
      border-radius: 0.5rem;
      margin: 2rem 0;
    }

    .search-box input {
      width: 100%;
      padding: 0.875rem 1rem;
      border: 2px solid #e9d5ff;
      border-radius: 0.4rem;
      font-size: 1rem;
      font-family: 'DM Sans', sans-serif;
      box-sizing: border-box;
      transition: all 0.3s ease;
    }

    .search-box input:focus {
      outline: none;
      border-color: #5B21B6;
      box-shadow: 0 0 0 3px rgba(91, 33, 182, 0.1);
    }

    @media print {
      body { background: white; }
      .btn-download { display: none; }
      .search-box { display: none; }
      .page-container { max-width: 100%; }
      .category-section { page-break-inside: avoid; }
      .code-card, .red-flag-card, .scenario-card { page-break-inside: avoid; }
    }

    @media (max-width: 768px) {
      .hero-title { font-size: 2rem; }
      .hero-subtitle { font-size: 1rem; }
      .section-padding { padding: 1.5rem; }
      .code-row { grid-template-columns: 1fr; gap: 0.25rem; }
      .code-label { display: inline; margin-right: 0.5rem; }
    }

    /* Dark mode styles (toggle uses body.dark-mode) */
    body.dark-mode {
      background: #0b1220;
      color: rgba(255,255,255,0.88);
    }

    body.dark-mode .page-container {
      background: transparent;
    }

    body.dark-mode .hero-section {
      background: linear-gradient(135deg, #2d1b4e 0%, #1f1535 100%);
      border-bottom-color: rgba(148, 163, 184, 0.25);
    }

    body.dark-mode .hero-title { color: #e9d5ff; }
    body.dark-mode .hero-subtitle { color: #d8b4fe; }
    body.dark-mode .hero-intro { color: rgba(216, 180, 254, 0.85); }

    body.dark-mode .section-divider {
      border-left-color: #7c3aed;
    }

    body.dark-mode .section-divider h2 {
      color: rgba(255,255,255,0.92) !important;
    }

    body.dark-mode .section-divider p {
      color: rgba(255,255,255,0.72) !important;
    }

    body.dark-mode .search-box {
      background: rgba(45, 27, 78, 0.75);
      border-color: rgba(124, 58, 237, 0.35);
    }

    body.dark-mode .search-box input {
      background: rgba(2, 6, 23, 0.65);
      color: rgba(255,255,255,0.9);
      border-color: rgba(124, 58, 237, 0.35);
    }

    body.dark-mode .search-box input:focus {
      border-color: rgba(124, 58, 237, 0.85);
      box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.25);
    }

    body.dark-mode .code-card {
      background: rgba(2, 6, 23, 0.55);
      border-color: rgba(148, 163, 184, 0.18);
    }

    body.dark-mode .code-title { color: rgba(255,255,255,0.9); }
    body.dark-mode .code-value { color: rgba(255,255,255,0.7); }
    body.dark-mode .code-label { color: rgba(216, 180, 254, 0.9); }
    body.dark-mode .code-number { color: rgba(216, 180, 254, 0.95); }

    body.dark-mode .scenario-card {
      background: rgba(2, 6, 23, 0.55);
      border-color: rgba(148, 163, 184, 0.18);
    }

    body.dark-mode .scenario-title { color: rgba(255,255,255,0.92); }

    body.dark-mode .scenario-codes {
      background: rgba(45, 27, 78, 0.75);
      border-left-color: rgba(124, 58, 237, 0.9);
      color: rgba(216, 180, 254, 0.95);
    }

    body.dark-mode .scenario-annotation {
      background: rgba(2, 6, 23, 0.45);
      border-left-color: rgba(124, 58, 237, 0.9);
    }

    body.dark-mode .annotation-label { color: rgba(216, 180, 254, 0.95); }
    body.dark-mode .annotation-text { color: rgba(255,255,255,0.72); }

    body.dark-mode .reference-table thead {
      background: rgba(45, 27, 78, 0.75);
      border-bottom-color: rgba(124, 58, 237, 0.9);
    }

    body.dark-mode .reference-table th { color: rgba(216, 180, 254, 0.95); }
    body.dark-mode .reference-table td {
      border-bottom-color: rgba(148, 163, 184, 0.16);
      color: rgba(255,255,255,0.72);
    }

    body.dark-mode .reference-table tbody tr:hover { background: rgba(2, 6, 23, 0.55); }
    body.dark-mode .reference-table tbody tr:nth-child(even) { background: rgba(2, 6, 23, 0.35); }

    body.dark-mode .footer-section {
      background: rgba(2, 6, 23, 0.35);
      border-top-color: rgba(148, 163, 184, 0.16);
    }

    body.dark-mode .footer-disclaimer { color: rgba(255,255,255,0.65); }
    body.dark-mode .footer-contact { color: rgba(216, 180, 254, 0.95); }

    body.dark-mode #theme-toggle-button {
      border-color: rgba(124, 58, 237, 0.45) !important;
      background: rgba(2, 6, 23, 0.45) !important;
      color: rgba(255,255,255,0.9) !important;
    }

    body { box-sizing: border-box; }
  </style>
</head>

<body class="h-full noise font-sans">
  <div id="app-container" class="h-full overflow-auto">

    <!-- Sticky Header (standalone) -->
    <header class="tm-no-print sticky top-0 z-50 border-b border-slate-800/60 bg-slate-950/80 backdrop-blur">
      <div class="mx-auto flex max-w-7xl items-center justify-between gap-4 px-6 py-4">
        <a href="https://transcript.taxmonitor.pro/" class="flex items-center gap-3 text-white">
          <span class="flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-purple-600 to-purple-500 text-slate-950 font-extrabold">TM</span>
          <div class="leading-tight">
            <div class="text-sm font-semibold">Transcript.Tax Monitor Pro</div>
            <div class="text-[11px] text-white/60">Free IRS Transcript Code Guide</div>
          </div>
        </a>

        <div class="flex items-center gap-2">
          <a
            href="/"
            class="inline-flex items-center gap-2 rounded-xl border border-slate-800/60 bg-slate-950/60 px-3 py-2 text-sm font-semibold text-white/80 backdrop-blur hover:text-white transition"
          >
            <svg class="h-5 w-5" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M15 18l-6-6 6-6" />
            </svg>
            Back
          </a>
        </div>
      </div>
    </header>

    <main class="py-10">
      <div class="page-container">

        <!-- Hero Section -->
        <div class="hero-section tm-anim">
          <div style="display: flex; justify-content: flex-end; align-items: center; margin-bottom: 1.5rem;">
            <button
              id="theme-toggle-button"
              type="button"
              aria-label="Toggle theme"
              title="Toggle Theme"
              class="inline-flex items-center justify-center h-11 w-11 rounded-xl border border-slate-300 bg-white text-slate-700 shadow-sm transition hover:shadow-md"
            >üåô</button>
          </div>
          <h1 class="hero-title">The Ultimate Guide to IRS Transcript Codes</h1>
          <p class="hero-subtitle">Master Every Code, Every Time</p>
          <p class="hero-intro">A comprehensive reference guide for tax professionals. Stop guessing what those codes mean. This guide breaks down every IRS transcript code you'll encounter, complete with plain English explanations, real-world scenarios, and clear action steps.</p>

          <button class="btn-download" onclick="window.print()">‚¨á Download as PDF</button>
        </div>

        <!-- Main Content -->
        <div class="section-padding tm-anim delay-1">

          <!-- Introduction Section -->
          <section class="section-divider">
            <h2 style="font-size: 1.5rem; font-weight: 700; color: #1f2937; margin: 0 0 1rem 0;">Why This Guide Exists</h2>
            <p style="color: #4b5563; line-height: 1.7; margin-bottom: 1rem;">IRS transcripts contain coded language designed for government systems, not for human readability. When clients receive a transcript, they see cryptic numbers and abbreviations that trigger anxiety and confusion even when nothing is wrong.</p>
            <p style="color: #4b5563; line-height: 1.7;">As a tax professional, you're often the interpreter between the IRS and your clients. This guide gives you the complete reference to decode any transcript instantly, explain it with confidence, and provide clear action guidance.</p>
          </section>

          <!-- SEARCH BOX -->
          <div class="search-box">
            <label style="font-size: 0.9rem; font-weight: 600; color: #5B21B6; margin-bottom: 0.75rem; display: block;">üîç Quick Find in This Guide</label>
            <input type="text" id="codeSearch" placeholder="Type a code number, title, or keyword..." autocomplete="off" />
            <div style="font-size: 0.8rem; color: #7c3aed; margin-top: 0.5rem; font-style: italic;">Search across all codes below to find what you need instantly</div>
          </div>

          <!-- =========================
               CONTENT BELOW IS UNCHANGED
               (your existing guide)
               ========================= -->

          <!-- Assessment Codes Section -->
          <section class="category-section">
            <h3 class="category-title">Assessment Codes</h3>
            <p class="category-description">Codes indicating changes made to the account by IRS processing or adjustments</p>

            <div class="code-card">
              <div class="code-number">150</div>
              <div class="code-title">Return Received</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">IRS received and scanned the taxpayer's original return</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">This is a normal, routine code indicating successful receipt of the return by IRS processing centers</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">None. This is an informational code.</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">201</div>
              <div class="code-title">Adjustment to Federal Tax</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">IRS made a change to the federal income tax liability on the return</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The IRS adjusted the tax amount claimed on the return. This could be an increase or decrease depending on the associated transaction code</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Review the adjustment reason. If a refund was reduced, determine if additional credits or deductions apply</span></div>
              <span class="risk-badge risk-moderate">Moderate Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">290</div>
              <div class="code-title">Relief from Liability</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">IRS removed or abated a tax or penalty from the account</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">A liability was forgiven. This could be from an appeal, reasonable cause request, first-time penalty abatement, or other relief program</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Confirm the specific relief program. Ensure the client understands what triggered the abatement for future compliance</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">340</div>
              <div class="code-title">Claim Recorded</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">A claim for refund, amendment, or other statutory claim was filed and recorded</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The IRS received a Form 1040-X, 941-X, or similar amended return or claim document</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Monitor for processing. Allow 3-6 months for IRS review and response depending on the claim type</span></div>
              <span class="risk-badge risk-moderate">Moderate Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">420</div>
              <div class="code-title">Statute Closing</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">The statute of limitations for IRS assessment or collection action has expired</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The IRS can no longer assess additional taxes or initiate collection proceedings for this tax year</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">This is generally positive. Ensure all outstanding issues have been resolved before the statute closes</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>
          </section>

          <!-- Payment & Credit Codes Section -->
          <section class="category-section">
            <h3 class="category-title">Payment &amp; Credit Codes</h3>
            <p class="category-description">Codes indicating payments received, credits applied, and payment method information</p>

            <div class="code-card">
              <div class="code-number">806</div>
              <div class="code-title">Payment Received</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">A payment was received and posted to the account</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">This is a normal code showing money was received by the IRS. Could be from estimated tax payments, extensions, or balance due payments</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Verify the payment amount matches what was sent. Cross-reference with payment confirmation records</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">846</div>
              <div class="code-title">Refund Issued</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">A refund was processed and paid to the taxpayer</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The IRS approved and disbursed a refund. Check the date to confirm when funds should arrive (typically 21 days for direct deposit)</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Confirm the refund amount is correct. If direct deposit, verify the account information. Follow up if funds don't arrive within stated timeframe</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">570</div>
              <div class="code-title">Refund Hold / Offset</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">A refund was intercepted and applied to another tax liability, or held pending review</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The IRS is holding the refund temporarily or offsetting it against other debts (other tax years, child support, student loans). This is a serious flag</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">IMMEDIATE. Determine the offset reason. If it's a mistake, file Form 8379 (Injured Spouse Claim) or contact IRS immediately</span></div>
              <span class="risk-badge risk-immediate">Immediate Action</span>
            </div>

            <div class="code-card">
              <div class="code-number">671</div>
              <div class="code-title">Estimated Tax Payment</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">An estimated tax payment (Form 1040-ES) was received and credited</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The taxpayer made a quarterly estimated payment. This reduces the balance due when the return is filed</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Verify the payment was for the correct quarter and year. Ensure it's credited before filing the return</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>
          </section>

          <!-- Refund Codes Section -->
          <section class="category-section">
            <h3 class="category-title">Refund Codes</h3>
            <p class="category-description">Codes specifically related to refund processing, holds, and status</p>

            <div class="code-card">
              <div class="code-number">768</div>
              <div class="code-title">Refund Pending</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">A refund is in process but not yet issued</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The return was accepted and approved for refund. The refund is queued for payment processing</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Wait. This is normal. Allow 21 days for direct deposit or 4-6 weeks for check delivery</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">772</div>
              <div class="code-title">Refund Accepted</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">The return was accepted for filing and the refund was approved</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">This is a positive milestone. The return passed IRS validation and is moving through processing</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">None. Track the refund status through Where's My Refund or the account transcript</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">890</div>
              <div class="code-title">Refund Funded</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">The refund was paid (funds transmitted to the taxpayer's bank or check issued)</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">Money is on the way. For direct deposit, expect 1-2 business days. For checks, expect 7-10 business days</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Confirm arrival with client. If not received within expected timeframe, initiate a trace</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>
          </section>

          <!-- Collection Activity Codes Section -->
          <section class="category-section">
            <h3 class="category-title">Collection Activity Codes</h3>
            <p class="category-description">Codes indicating collection notices, levies, liens, and enforcement action</p>

            <div class="code-card">
              <div class="code-number">501</div>
              <div class="code-title">Reversal</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">A previous transaction was reversed or cancelled</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The IRS undid a previous action. This could mean a payment reversal, cancelled assessment, or corrected error</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Understand why the reversal occurred. Contact IRS if unexpected to clarify the reason</span></div>
              <span class="risk-badge risk-moderate">Moderate Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">520</div>
              <div class="code-title">Notice Issued</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">The IRS issued a notice to the taxpayer</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The taxpayer should have received correspondence about this account. Could be routine or action-required</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">CRITICAL: Confirm the client received the notice. If not, call IRS to request reissuance. Do not ignore notices</span></div>
              <span class="risk-badge risk-immediate">Immediate Action</span>
            </div>

            <div class="code-card">
              <div class="code-number">610</div>
              <div class="code-title">Lien Filed</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">A federal tax lien was filed on the taxpayer's property</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">This is serious. The IRS has a legal claim on all the taxpayer's assets. This appears on credit reports and affects borrowing ability</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">IMMEDIATE ACTION REQUIRED. Develop a payment plan, compromise offer, or currently not collectible status. Consider representation</span></div>
              <span class="risk-badge risk-immediate">Immediate Action</span>
            </div>

            <div class="code-card">
              <div class="code-number">622</div>
              <div class="code-title">Levy Released</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">A wage or bank levy was released</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The IRS stopped garnishing the taxpayer's wages or bank account. This is positive and means the account is resolving</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Notify the employer/bank that the levy is released. Confirm no future levies are in place</span></div>
              <span class="risk-badge risk-low">Low Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">650</div>
              <div class="code-title">Installment Plan</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">An installment agreement (payment plan) was established</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The taxpayer can pay over time instead of as a lump sum. This stops collection action while payments are made</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Ensure client understands the payment amount and due date. Missed payments will default the agreement</span></div>
              <span class="risk-badge risk-moderate">Moderate Risk</span>
            </div>
          </section>

          <!-- Notice & Adjustment Codes Section -->
          <section class="category-section">
            <h3 class="category-title">Notice &amp; Adjustment Codes</h3>
            <p class="category-description">Codes for IRS notices, correspondence items, and account adjustments</p>

            <div class="code-card">
              <div class="code-number">971</div>
              <div class="code-title">Correspondence Item</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">A notice or correspondence was generated and mailed to the taxpayer</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">This is a placeholder for multiple notice types (CP2000, CP2501, etc). The specific notice type determines action</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">CRITICAL: Always follow up on 971 codes. Verify the client received the notice within 30 days of the transcript date</span></div>
              <span class="risk-badge risk-immediate">Immediate Action</span>
            </div>

            <div class="code-card">
              <div class="code-number">766</div>
              <div class="code-title">ITIN Returned</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">An Individual Taxpayer Identification Number (ITIN) was expended on a return</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The ITIN is no longer valid. A new ITIN must be applied for using Form W-7</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">File Form W-7 immediately if filing another return. Without a valid ITIN, the return may be rejected</span></div>
              <span class="risk-badge risk-moderate">Moderate Risk</span>
            </div>

            <div class="code-card">
              <div class="code-number">846</div>
              <div class="code-title">Refund Issued (Adjusted)</div>
              <div class="code-row"><span class="code-label">What Triggered It</span><span class="code-value">An adjusted refund was issued after a previous amount was changed</span></div>
              <div class="code-row"><span class="code-label">What It Means</span><span class="code-value">The original refund was modified. This could be an increase or decrease based on IRS adjustments</span></div>
              <div class="code-row"><span class="code-label">Required Action</span><span class="code-value">Verify the adjusted amount is correct. If decrease is unexpected, request explanation from IRS</span></div>
              <span class="risk-badge risk-moderate">Moderate Risk</span>
            </div>
          </section>

          <!-- Real Client Scenarios Section -->
          <section class="section-divider">
            <h2 style="font-size: 1.5rem; font-weight: 700; color: #1f2937; margin: 0 0 1.5rem 0;">Real Client Scenarios</h2>
            <p style="color: #6b7280; margin-bottom: 2rem;">Three common situations showing how codes work together</p>

            <div class="scenario-card">
              <div class="scenario-title">Scenario 1: "My Refund Is Late"</div>
              <p style="color: #4b5563; margin-bottom: 1rem;">Client filed their 2024 return on February 1st. They expected a refund within 21 days. It's now mid-March and they're worried.</p>
              <div class="scenario-codes">Codes Found: 150, 772, 768</div>
              <div class="scenario-annotation"><div class="annotation-label">Code 150: Return Received</div><div class="annotation-text">The IRS scanned and received the paper return. This is normal and expected.</div></div>
              <div class="scenario-annotation"><div class="annotation-label">Code 772: Refund Accepted</div><div class="annotation-text">The return passed validation and was accepted for processing. The refund was approved in principle.</div></div>
              <div class="scenario-annotation"><div class="annotation-label">Code 768: Refund Pending</div><div class="annotation-text">The refund is currently in the queue for payment processing. This is normal. Most refunds take 21 days from acceptance.</div></div>
              <div style="background: #f0fdf4; border-left: 3px solid #16a34a; padding: 1rem; border-radius: 0.375rem; margin-top: 1rem;">
                <strong style="color: #15803d;">‚úì What to Tell the Client:</strong>
                <p style="color: #166534; margin-top: 0.5rem;">Your return is approved and your refund is being processed. This is perfectly normal for this time of year. You should see the money in your account within the next 7-14 days. If you don't see it by [21 days from today], contact us and we'll file a trace.</p>
              </div>
            </div>

            <div class="scenario-card">
              <div class="scenario-title">Scenario 2: "I Got a Notice and My Refund Stopped"</div>
              <p style="color: #4b5563; margin-bottom: 1rem;">Client received Notice CP2501 (adjustment to their return). They're confused and want to know why their refund disappeared.</p>
              <div class="scenario-codes">Codes Found: 150, 201, 520, 570</div>
              <div class="scenario-annotation"><div class="annotation-label">Code 150: Return Received</div><div class="annotation-text">Standard receipt code.</div></div>
              <div class="scenario-annotation"><div class="annotation-label">Code 201: Adjustment to Federal Tax</div><div class="annotation-text">The IRS disallowed a deduction or adjusted income. This increased the tax owed, reducing or eliminating the refund.</div></div>
              <div class="scenario-annotation"><div class="annotation-label">Code 520: Notice Issued</div><div class="annotation-text">The IRS mailed correspondence explaining what was adjusted. This is the CP2501 they received.</div></div>
              <div class="scenario-annotation"><div class="annotation-label">Code 570: Refund Hold / Offset</div><div class="annotation-text">The refund was halted pending review or was offset against the new balance due. This is NOT a positive sign.</div></div>
              <div style="background: #fef2f2; border-left: 3px solid #dc2626; padding: 1rem; border-radius: 0.375rem; margin-top: 1rem;">
                <strong style="color: #991b1b;">‚ö† What to Tell the Client:</strong>
                <p style="color: #7f1d1d; margin-top: 0.5rem;">The IRS adjusted your return and disallowed [specific deduction]. Your refund has been reduced or offset against the new amount owed. We need to review the notice carefully. If you disagree with this adjustment, we have 30 days to file a protest. Let's set up a meeting to discuss your options.</p>
              </div>
            </div>

            <div class="scenario-card">
              <div class="scenario-title">Scenario 3: "There's a Lien on My Account"</div>
              <p style="color: #4b5563; margin-bottom: 1rem;">Self-employed client has back taxes from 2021. They want to buy a house but found out there's a federal lien on their file.</p>
              <div class="scenario-codes">Codes Found: 520, 610, 650</div>
              <div class="scenario-annotation"><div class="annotation-label">Code 520: Notice Issued</div><div class="annotation-text">Notice of Federal Tax Lien was mailed (usually Form 668A or 668F).</div></div>
              <div class="scenario-annotation"><div class="annotation-label">Code 610: Lien Filed</div><div class="annotation-text">The lien was filed with the county recorder. This appears on credit reports and prevents borrowing. This is the critical issue.</div></div>
              <div class="scenario-annotation"><div class="annotation-label">Code 650: Installment Plan</div><div class="annotation-text">An installment agreement is in place. The lien may be released if payments are current and the balance drops below $10,000 (under Fresh Start Initiative rules).</div></div>
              <div style="background: #fef2f2; border-left: 3px solid #dc2626; padding: 1rem; border-radius: 0.375rem; margin-top: 1rem;">
                <strong style="color: #991b1b;">‚ö† What to Tell the Client:</strong>
                <p style="color: #7f1d1d; margin-top: 0.5rem;">Yes, there's a lien on your account from the back tax debt. The good news: you have an installment agreement active. If you maintain payments and get the balance under $10,000, we can request a subordination or release. You may be able to get a mortgage with the lien in place, but the lender may require proof of payments and an agreement from IRS. Let's discuss a payment strategy to get you under $10,000 ASAP.</p>
              </div>
            </div>
          </section>

          <!-- Red Flag Alerts Section -->
          <section class="section-divider">
            <h2 style="font-size: 1.5rem; font-weight: 700; color: #1f2937; margin: 0 0 1.5rem 0;">Red Flag Alerts</h2>
            <p style="color: #6b7280; margin-bottom: 2rem;">Codes that require immediate attention. Never delay on these.</p>

            <div class="red-flag-card">
              <div class="red-flag-code">570</div>
              <div class="red-flag-title">Refund Hold / Offset</div>
              <p style="color: #4b5563; margin-bottom: 1rem;">A refund is being held or offset against other debts. This is serious.</p>
              <div class="red-flag-action"><strong>Action Required:</strong> Within 24 hours, determine if this is a legitimate offset (other tax years, student loans, child support) or an error. If erroneous, file Form 8379 (Injured Spouse Claim) immediately. If legitimate but unexpected, request a payment plan to resolve the underlying liability.</div>
            </div>

            <div class="red-flag-card">
              <div class="red-flag-code">610</div>
              <div class="red-flag-title">Federal Tax Lien Filed</div>
              <p style="color: #4b5563; margin-bottom: 1rem;">A lien has been placed on the taxpayer's property. This is the most serious collection action short of levy.</p>
              <div class="red-flag-action"><strong>Action Required:</strong> IMMEDIATE. Contact IRS Collection Division. Consider: (1) Installment agreement to satisfy the debt, (2) Offer in Compromise, (3) Currently Not Collectible status, or (4) Professional representation. Request a subordination letter if the taxpayer needs to borrow money.</div>
            </div>

            <div class="red-flag-card">
              <div class="red-flag-code">520 + 971</div>
              <div class="red-flag-title">Notice Issued (Unresolved)</div>
              <p style="color: #4b5563; margin-bottom: 1rem;">A notice was issued and the notice code (971) appears without resolution codes. The notice may be unresolved.</p>
              <div class="red-flag-action"><strong>Action Required:</strong> Within 5 business days, confirm the client received the notice. Read the notice carefully. It will state a response deadline (usually 30 days). If agreement is needed, respond within the deadline. If disagreement, file a protest with the IRS Office of Appeals.</div>
            </div>

            <div class="red-flag-card">
              <div class="red-flag-code">502</div>
              <div class="red-flag-title">Default Notice (Failure to File)</div>
              <p style="color: #4b5563; margin-bottom: 1rem;">A notice for failure to file a required return was issued.</p>
              <div class="red-flag-action"><strong>Action Required:</strong> File the missing return immediately, even if no tax is due. Penalties will continue to accrue for each year of non-compliance. If returns span multiple years, file all missing years within 60 days.</div>
            </div>

            <div class="red-flag-card">
              <div class="red-flag-code">301</div>
              <div class="red-flag-title">Penalty Assessed</div>
              <p style="color: #4b5563; margin-bottom: 1rem;">The IRS assessed a penalty (accuracy-related, fraud, failure-to-pay, etc).</p>
              <div class="red-flag-action"><strong>Action Required:</strong> Identify the penalty type from the notice. If a mistake, request relief based on reasonable cause. If accuracy penalty, review the return to ensure proper substantiation. Consider amended return if errors are found.</div>
            </div>
          </section>

          <!-- Quick Reference Chart -->
          <section class="section-divider">
            <h2 style="font-size: 1.5rem; font-weight: 700; color: #1f2937; margin: 0 0 1.5rem 0;">Quick Reference Chart</h2>
            <p style="color: #6b7280; margin-bottom: 1rem;">Fast lookup for common codes. Print this page and keep it at your desk.</p>

            <table class="reference-table">
              <thead>
                <tr>
                  <th>Code</th>
                  <th>Meaning</th>
                  <th>Risk Level</th>
                  <th>Typical Action</th>
                </tr>
              </thead>
              <tbody>
                <tr><td><strong>150</strong></td><td>Return Received</td><td>Low</td><td>Normal - track processing</td></tr>
                <tr><td><strong>201</strong></td><td>Tax Adjustment</td><td>Moderate</td><td>Review adjustment reason</td></tr>
                <tr><td><strong>290</strong></td><td>Relief from Liability</td><td>Low</td><td>Confirm relief program</td></tr>
                <tr><td><strong>340</strong></td><td>Claim Recorded</td><td>Moderate</td><td>Monitor for processing</td></tr>
                <tr><td><strong>420</strong></td><td>Statute Closing</td><td>Low</td><td>Verify all issues resolved</td></tr>
                <tr><td><strong>501</strong></td><td>Reversal</td><td>Moderate</td><td>Understand reason</td></tr>
                <tr><td><strong>520</strong></td><td>Notice Issued</td><td>Immediate</td><td>Confirm receipt - read carefully</td></tr>
                <tr><td><strong>570</strong></td><td>Refund Hold/Offset</td><td>Immediate</td><td>Determine offset reason - ACT FAST</td></tr>
                <tr><td><strong>610</strong></td><td>Lien Filed</td><td>Immediate</td><td>Contact IRS Collection - get plan</td></tr>
                <tr><td><strong>622</strong></td><td>Levy Released</td><td>Low</td><td>Confirm with employer/bank</td></tr>
                <tr><td><strong>650</strong></td><td>Installment Plan</td><td>Moderate</td><td>Ensure payments stay current</td></tr>
                <tr><td><strong>671</strong></td><td>Estimated Tax Payment</td><td>Low</td><td>Verify correct quarter/year</td></tr>
                <tr><td><strong>768</strong></td><td>Refund Pending</td><td>Low</td><td>Wait - normal processing</td></tr>
                <tr><td><strong>772</strong></td><td>Refund Accepted</td><td>Low</td><td>Track status - good sign</td></tr>
                <tr><td><strong>806</strong></td><td>Payment Received</td><td>Low</td><td>Verify amount posted correctly</td></tr>
                <tr><td><strong>846</strong></td><td>Refund Issued</td><td>Low</td><td>Confirm arrival with client</td></tr>
                <tr><td><strong>890</strong></td><td>Refund Funded</td><td>Low</td><td>Track delivery - should arrive soon</td></tr>
                <tr><td><strong>971</strong></td><td>Correspondence Item</td><td>Immediate</td><td>Verify client received notice</td></tr>
              </tbody>
            </table>
          </section>

          <!-- Key Takeaways Section -->
          <section class="section-divider">
            <h2 style="font-size: 1.5rem; font-weight: 700; color: #1f2937; margin: 0 0 1.5rem 0;">Key Takeaways</h2>

            <div style="background: #f3e8ff; border-left: 4px solid #5B21B6; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
              <h3 style="color: #5B21B6; font-weight: 700; margin: 0 0 1rem 0;">The Golden Rule</h3>
              <p style="color: #4b5563; margin: 0; line-height: 1.6;">Always flag codes 520, 570, 610, and 971. These codes indicate unresolved issues that require immediate action. A few hours of attention now prevents days or weeks of problems later.</p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
              <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem;">
                <h4 style="color: #1f2937; font-weight: 700; margin: 0 0 0.75rem 0;">What Codes Tell You</h4>
                <ul style="color: #4b5563; margin: 0; padding-left: 1.5rem; line-height: 1.7;">
                  <li>What the IRS did to the account</li>
                  <li>When they did it</li>
                  <li>What status the return is in</li>
                  <li>Whether action is needed</li>
                </ul>
              </div>

              <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1.5rem;">
                <h4 style="color: #1f2937; font-weight: 700; margin: 0 0 0.75rem 0;">What Codes Don't Tell You</h4>
                <ul style="color: #4b5563; margin: 0; padding-left: 1.5rem; line-height: 1.7;">
                  <li>Specific dollar amounts (see the detail columns)</li>
                  <li>The exact reason for an action</li>
                  <li>Which form was filed (check the return type)</li>
                  <li>What notice was mailed (check the notice description)</li>
                </ul>
              </div>
            </div>

            <div style="background: #fef3c7; border-left: 4px solid #d97706; padding: 1.5rem; border-radius: 0.5rem; margin-top: 1.5rem;">
              <h3 style="color: #92400e; font-weight: 700; margin: 0 0 1rem 0;">Pro Tip: Always Cross-Reference</h3>
              <p style="color: #78350f; margin: 0; line-height: 1.6;">Transcript codes work in sequences. A 520 (Notice Issued) + 971 (Correspondence Item) together means a notice was mailed. A 150 (Return Received) + 201 (Tax Adjustment) means the return was accepted but changed. Learn to read these sequences as a story, not individual events.</p>
            </div>
          </section>

          <!-- Footer Section (inside page content) -->
          <div class="footer-section">
            <div class="footer-disclaimer">
              <strong>Professional Disclaimer:</strong> This guide is for educational purposes and compiled from IRS publications and tax professional experience. Codes are subject to change and new codes are added periodically. Always verify interpretations against the most current IRS documentation and Form 4506-C transcripts. For specific tax or collection issues, consult with a tax professional or attorney. This guide does not constitute tax, legal, or professional advice.
            </div>
            <div class="footer-contact">
              <span id="tm-guide-year">¬©</span> Transcript.Tax Monitor Pro
              <span style="margin: 0 8px; color: #9ca3af;">‚Ä¢</span>
              <a href="/legal/privacy.html" style="color: #5B21B6; text-decoration: none;">Privacy</a>
              <span style="margin: 0 8px; color: #9ca3af;">‚Ä¢</span>
              <a href="/legal/terms.html" style="color: #5B21B6; text-decoration: none;">Terms</a>
            </div>
          </div>

        </div>
      </div>
    </main>

    <!-- Footer (standalone) -->
      <footer class="tm-no-print px-6 py-3 mt-1 border-t border-slate-800/60 bg-slate-950/80 backdrop-blur">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
          <p class="text-slate-500 text-sm">¬© <span id="footer-year"></span> Transcript.Tax Monitor Pro. All rights reserved.</p>
          <div class="flex items-center gap-6">
            <a href="/legal/privacy.html" class="text-slate-400 hover:text-purple-400 text-sm transition-colors">Privacy Policy</a>
            <a href="/legal/terms.html" class="text-slate-400 hover:text-purple-400 text-sm transition-colors">Terms of Service</a>
          </div>
        </div>
      </footer>
  </div>

  <script>
    (function () {
      // Prevent the page from loading "flat".
      requestAnimationFrame(() => document.documentElement.classList.add('tm-loaded'));

      // --- tiny ‚Äútests‚Äù (in-browser) ---
      function assert(name, condition) {
        if (!condition) {
          console.error('test_failed', name);
          throw new Error(`test_failed:${name}`);
        }
      }

      function runTests() {
        // IDs should be unique
        assert('codeSearch_unique', document.querySelectorAll('#codeSearch').length === 1);

        // Header should have correct home link
        const brandLink = document.querySelector('a[href="https://transcript.taxmonitor.pro/"]');
        assert('brand_link_exists', !!brandLink);

        // Back link should exist
        const backLink = document.querySelector('a[href="/"]');
        assert('back_link_exists', !!backLink);

        // Theme toggle should not crash if missing
        assert('themeToggle_defined', typeof themeToggle !== 'undefined');
      }

      // --- footer years ---
      (function setYears() {
        const y = String(new Date().getFullYear());
        const a = document.getElementById('footer-year');
        const b = document.getElementById('tm-guide-year');
        if (a) a.textContent = y;
        if (b) b.textContent = `¬© ${y}`;
      })();

      // --- theme toggle (guarded) ---
      // NOTE: you requested removing the toggle UI. This keeps the script from crashing
      // even if older code paths still reference it.
      const themeToggle = document.getElementById('theme-toggle-button');
      const body = document.body;

      const savedTheme = String(localStorage.getItem('theme') || 'light');
      if (savedTheme === 'dark') {
        body.classList.add('dark-mode');
        if (themeToggle) themeToggle.textContent = '‚òÄÔ∏è';
      }

      if (themeToggle) {
        themeToggle.addEventListener('click', function () {
          body.classList.toggle('dark-mode');
          const isDarkMode = body.classList.contains('dark-mode');
          localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
          themeToggle.textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
        });
      }

      // --- search filtering ---
      const searchInput = document.getElementById('codeSearch');
      const codeCards = Array.from(document.querySelectorAll('.code-card'));

      searchInput?.addEventListener('input', function (e) {
        const searchTerm = String(e.target?.value || '').toLowerCase().trim();

        codeCards.forEach((card) => {
          if (!searchTerm) {
            card.classList.remove('hidden');
            return;
          }

          const cardText = String(card.textContent || '').toLowerCase();
          if (cardText.includes(searchTerm)) card.classList.remove('hidden');
          else card.classList.add('hidden');
        });
      });

      // --- print shortcut ---
      document.addEventListener('keydown', function (e) {
        if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
          e.preventDefault();
          window.print();
        }
      });

      // Optional: run tests
      const url = new URL(window.location.href);
      const run = String(url.searchParams.get('runTests') || '').trim().toLowerCase();
      if (run === '1' || run === 'true') runTests();
    })();
  </script>
</body>
</html>
