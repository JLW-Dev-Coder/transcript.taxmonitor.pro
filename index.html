<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transcript.Tax Monitor Pro - IRS Transcript Automation</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script>
    // Lock DM Sans as the global Tailwind sans font.
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['DM Sans', 'ui-sans-serif', 'system-ui', '-apple-system', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial']
          }
        }
      }
    };
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.min.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    if (typeof pdfjsLib !== 'undefined') {
      pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.worker.min.js";
    }
  </script>
  <style>
    :root {
      --color-midnight: #0b0a14;
      --color-gold: #a855f7;
      --color-cream: #faf7ff;
      --color-navy: #2e1065;
      --color-sage: #7c3aed;
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: 'DM Sans', sans-serif;
    }

    body {
      background:
        radial-gradient(900px 500px at 10% 10%, rgba(168, 85, 247, .18), transparent 60%),
        radial-gradient(900px 500px at 90% 20%, rgba(56, 189, 248, .10), transparent 55%),
        radial-gradient(900px 600px at 40% 110%, rgba(34, 197, 94, .08), transparent 60%),
        linear-gradient(180deg, #0b0a14 0%, #070713 100%);
      color: #e5e7eb;
    }

    .noise:before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      opacity: .35;
      z-index: 0;
    }

    .bg-cream, .bg-white { background: transparent !important; }
    .border-gray-200 { border-color: rgba(148, 163, 184, 0.18) !important; }
    .text-midnight { color: #f8fafc !important; }
    .text-gray-400 { color: rgba(226, 232, 240, 0.65) !important; }
    .text-gray-500 { color: rgba(226, 232, 240, 0.70) !important; }
    .text-gray-600 { color: rgba(226, 232, 240, 0.78) !important; }
    .text-gray-700 { color: rgba(226, 232, 240, 0.86) !important; }

    .glass {
      background: rgba(15, 23, 42, 0.55);
      border: 1px solid rgba(148, 163, 184, 0.16);
      box-shadow: 0 18px 45px rgba(0, 0, 0, .35);
      backdrop-filter: blur(10px);
    }

    .gradient-border {
      position: relative;
      border-radius: 20px;
    }

    .gradient-border:before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 20px;
      padding: 1px;
      background: linear-gradient(135deg, rgba(168, 85, 247, .65), rgba(56, 189, 248, .20), rgba(34, 197, 94, .14));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
      opacity: .9;
    }

    .font-display {
      font-family: 'DM Sans', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    .gradient-hero {
      background: linear-gradient(135deg, var(--color-midnight) 0%, var(--color-navy) 45%, #4c1d95 100%);
    }

    .gradient-gold {
      background: linear-gradient(135deg, var(--color-gold) 0%, #7c3aed 100%);
    }

    .text-gold { color: var(--color-gold); }
    .bg-midnight { background-color: var(--color-midnight); }
    .bg-cream { background-color: var(--color-cream); }
    .bg-navy { background-color: var(--color-navy); }
    .bg-sage { background-color: var(--color-sage); }

    .btn-primary {
      background: linear-gradient(135deg, var(--color-gold) 0%, #7c3aed 100%);
      color: white;
      font-weight: 700;
      padding: 1rem 2.5rem;
      border-radius: 0.75rem;
      transition: all 0.3s ease;
      box-shadow: 0 8px 30px rgba(168, 85, 247, 0.28);
      cursor: pointer;
      border: none;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 44px rgba(168, 85, 247, 0.38);
    }

    .btn-secondary {
      background: transparent;
      border: 2px solid rgba(168, 85, 247, 0.75);
      color: rgba(233, 213, 255, 0.95);
      font-weight: 700;
      padding: 0.875rem 2rem;
      border-radius: 0.75rem;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .btn-secondary:hover {
      background: rgba(168, 85, 247, 0.18);
      border-color: rgba(168, 85, 247, 0.95);
      color: white;
    }

    .card-elevated {
      background: rgba(15, 23, 42, 0.55);
      border: 1px solid rgba(148, 163, 184, 0.16);
      border-radius: 1rem;
      box-shadow: 0 18px 45px rgba(0, 0, 0, .35);
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    .card-elevated:hover {
      transform: translateY(-3px);
      box-shadow: 0 24px 65px rgba(0, 0, 0, .45);
    }

    /* Parser cards (consistent spec) */
    .tm-card {
      background: rgba(15, 23, 42, 0.55);
      border: 1px solid rgba(168, 85, 247, 0.24);
      border-radius: 1.25rem;
      box-shadow: 0 18px 45px rgba(0, 0, 0, .35);
      backdrop-filter: blur(10px);
      display: flex;
      flex-direction: column;
      height: 100%;
      overflow: hidden;
    }

    .tm-card__head {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 1rem;
      padding: 1.75rem 1.75rem 1rem;
    }

    .tm-card__title {
      color: rgba(255, 255, 255, 0.96);
      font-weight: 800;
      letter-spacing: -0.2px;
    }

    .tm-card__sub {
      color: rgba(226, 232, 240, 0.7);
      font-size: 0.875rem;
      line-height: 1.35;
      margin-top: 0.35rem;
    }

    .tm-card__icon {
      width: 2.75rem;
      height: 2.75rem;
      border-radius: 0.9rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid rgba(168, 85, 247, 0.25);
      background: rgba(168, 85, 247, 0.12);
      flex-shrink: 0;
    }

    .tm-card__body {
      padding: 0.75rem 1.75rem 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.1rem;
      flex: 1;
      min-height: 0;
    }

    .tm-card__footer {
      padding: 1.1rem 1.75rem 1.75rem;
    }

    .tm-pill {
      background: rgba(168, 85, 247, 0.14);
      border: 1px solid rgba(168, 85, 247, 0.42);
      border-radius: 9999px;
      padding: 0.35rem 0.85rem;
      font-size: 0.75rem;
      color: rgba(233, 213, 255, 0.95);
      white-space: nowrap;
    }

    .tm-note {
      background: rgba(2, 6, 23, 0.35);
      border: 1px solid rgba(148, 163, 184, 0.18);
      border-radius: 0.9rem;
      padding: 1rem;
    }

    .tm-note__row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .tm-note__kicker {
      color: rgba(255, 255, 255, 0.82);
      font-size: 0.75rem;
      font-weight: 800;
    }

    .tm-note__text {
      color: rgba(226, 232, 240, 0.55);
      font-size: 0.75rem;
      margin-top: 0.05rem;
    }

    .tm-dropzone {
      border: 2px dashed rgba(168, 85, 247, 0.55);
      border-radius: 1rem;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      background: rgba(168, 85, 247, 0.06);
      transition: border-color 0.2s ease, background 0.2s ease;
    }

    .tm-dropzone:hover {
      border-color: rgba(192, 132, 252, 0.8);
      background: rgba(168, 85, 247, 0.09);
    }

    .tm-btn-primary {
      width: 100%;
      background: linear-gradient(90deg, rgba(147, 51, 234, 1), rgba(168, 85, 247, 1));
      color: #fff;
      font-weight: 800;
      padding: 0.85rem 1rem;
      border-radius: 0.9rem;
      transition: transform 0.15s ease, filter 0.15s ease, opacity 0.15s ease;
      box-shadow: 0 12px 35px rgba(168, 85, 247, 0.22);
    }

    .tm-btn-primary:hover { transform: translateY(-1px); filter: brightness(1.04); }
    .tm-btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; filter: none; }

    .tm-btn-secondary {
      width: 100%;
      background: transparent;
      border: 2px solid rgba(168, 85, 247, 0.75);
      color: rgba(233, 213, 255, 0.95);
      font-weight: 800;
      padding: 0.85rem 1rem;
      border-radius: 0.9rem;
      transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease;
    }

    .tm-btn-secondary:hover {
      background: rgba(168, 85, 247, 0.18);
      border-color: rgba(168, 85, 247, 0.95);
      color: #fff;
    }

    .page-section {
      display: none;
      animation: fadeIn 0.5s ease;
    }

    .page-section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .float-animation {
      animation: float 3s ease-in-out infinite;
    }

    .feature-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--color-gold) 0%, #7c3aed 100%);
      border-radius: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }

    .counter {
      background: rgba(168, 85, 247, 0.14);
      border: 1px solid rgba(168, 85, 247, 0.45);
      border-radius: 9999px;
      padding: 0.35rem 0.85rem;
      font-size: 0.875rem;
      color: rgba(233, 213, 255, 0.95);
    }

    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      color: white;
      font-weight: 500;
      z-index: 1000;
      animation: slideIn 0.3s ease;
    }

    .toast-success { background: #7c3aed; }
    .toast-error { background: #dc2626; }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .input-field {
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(212, 168, 83, 0.3);
      border-radius: 0.5rem;
      padding: 0.875rem 1rem;
      color: white;
      width: 100%;
      transition: all 0.3s ease;
    }

    .input-field:focus {
      outline: none;
      border-color: var(--color-gold);
      background: rgba(255, 255, 255, 0.15);
    }

    .input-field::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    .input-field-light {
      background: rgba(2, 6, 23, .35);
      border: 1px solid rgba(148, 163, 184, .25);
      color: #e5e7eb;
    }

    .input-field-light:focus {
      border-color: rgba(168, 85, 247, .75);
      box-shadow: 0 0 0 3px rgba(168, 85, 247, .18);
    }

    .input-field-light::placeholder {
      color: rgba(226, 232, 240, 0.55);
    }

    .check-item {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .check-icon {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      background: #7c3aed;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.75rem;
    }

    @media print {
      body { background: white !important; }
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 <style>
/* File input styling */
input[type="file"]::file-selector-button {
  border-radius: 12px;
  padding: 8px 14px;
  border: 1px solid rgba(255,255,255,0.15);
  background: rgba(255,255,255,0.06);
  color: #ffffff;
  cursor: pointer;
}

input[type="file"]::file-selector-button:hover {
  background: rgba(255,255,255,0.12);
}

input[type="file"] {
  color: rgba(255,255,255,0.7);
}

input[type="file"]::file-selector-button {
  margin-right: 12px;
}
</style>
<style>
/* Force DM Sans everywhere */
html, body, button, input, textarea, select {
  font-family: 'DM Sans', sans-serif !important;
}
</style>
</head>
 <body class="h-full noise font-sans">
  <div id="app-container" class="h-full overflow-auto"><!-- Landing Page -->
   <section id="landing-page" class="page-section active"><!-- Navigation -->
    <div data-partial="partials/nav.html"></div><!-- Hero Section -->
    <header class="gradient-hero relative min-h-screen flex items-center">
     <div class="max-w-7xl mx-auto px-6 py-20 grid lg:grid-cols-2 gap-12 items-center w-full">
      <div class="text-white">
       <div class="counter inline-block mb-6">
        ðŸ”¥ Over 2,000 Tax Pros Trust Us
       </div>
       <h1 id="hero-headline" class="font-display text-4xl md:text-5xl lg:text-6xl font-bold leading-tight mb-6">Transform IRS Transcripts Into Professional Reports in Minutes</h1>
       <p id="hero-subheadline" class="text-xl text-white/80 mb-8 leading-relaxed">The only automation tool tax professionals need to parse, interpret, and present IRS transcript data with beautiful, branded reports your clients will love.</p>
       <div class="flex flex-col sm:flex-row gap-4 mb-8"><button onclick="showPage('lead-magnet')" class="btn-primary text-lg" id="hero-cta"> Get Your Free Guide â†’ </button> <button onclick="showPage('sales-page')" class="btn-secondary"> See How It Works </button>
       </div>
       <div class="flex items-center gap-6 text-white/70 text-sm">
        <div class="flex items-center gap-2">
         <svg class="w-5 h-5 text-purple-300" fill="currentColor" viewbox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
         </svg> No Credit Card Required
        </div>
        <div class="flex items-center gap-2">
         <svg class="w-5 h-5 text-purple-300" fill="currentColor" viewbox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
         </svg> Instant Access
        </div>
       </div>
      </div>
      <div class="relative hidden lg:block">
       <div class="float-animation">
        <div class="card-elevated p-8 max-w-md mx-auto">
         <div class="flex items-center gap-3 mb-6">
          <div class="w-12 h-12 bg-sage rounded-full flex items-center justify-center text-white text-xl">
           âœ“
          </div>
          <div>
           <p class="font-bold text-midnight">Report Generated</p>
           <p class="text-sm text-gray-500">Client: Johnson Family Trust</p>
          </div>
         </div>
         <div class="space-y-3">
          <div class="flex justify-between text-sm"><span class="text-gray-600">Transcript Codes Found</span> <span class="font-bold text-midnight">24</span>
          </div>
          <div class="flex justify-between text-sm"><span class="text-gray-600">Interpretation Accuracy</span> <span class="font-bold text-sage">100%</span>
          </div>
          <div class="flex justify-between text-sm"><span class="text-gray-600">Processing Time</span> <span class="font-bold text-midnight">8.3 sec</span>
          </div>
         </div>
         <div class="mt-6 p-4 bg-cream rounded-lg">
          <p class="text-xs text-gray-500 mb-2">Sample Output Preview</p>
          <div class="flex items-center gap-2">
           <div class="w-8 h-8 bg-navy rounded"></div>
           <div class="flex-1">
            <div class="h-2 bg-gray-200 rounded w-3/4 mb-1"></div>
            <div class="h-2 bg-gray-200 rounded w-1/2"></div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
    </header><!-- Parser Section -->
    <section class="py-20 bg-gradient-to-b from-slate-900 to-slate-800">
     <div class="max-w-7xl mx-auto px-6">
      <div class="max-w-3xl mx-auto mb-16 text-center">
       <div class="flex flex-col items-center gap-4">
        <div class="w-full flex flex-col items-center justify-center gap-4">
         <h2 class="font-display text-3xl md:text-4xl font-bold text-white">Try the Transcript Parser</h2>
         <div class="flex flex-wrap items-center justify-center gap-2 text-xs"></div>
        </div>
       </div>
       <p class="text-xl text-white/80">Upload a transcript PDF. It parses in your browser. No uploads. No risk.</p>
       <p class="text-sm text-white/60 mt-3">Optional: add your firm logo so the preview report looks like <em>your</em> deliverable.</p>
      </div>

      <div class="grid lg:grid-cols-2 gap-6 lg:gap-8 items-stretch">
       <!-- Card 1: Upload & Parse -->
       <div class="tm-card">
        <div class="tm-card__head">
         <div>
          <h3 class="tm-card__title text-lg"><span class="inline-flex align-middle mr-2" aria-hidden="true">
            <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" fill="rgba(251,191,36,0.16)" stroke="rgba(251,191,36,0.9)" stroke-width="1.6"/>
              <text x="12" y="16" text-anchor="middle" font-size="10" font-weight="800" fill="rgba(251,191,36,0.95)" font-family="DM Sans, ui-sans-serif, system-ui">1</text>
            </svg>
          </span>Upload Transcript</h3>
          <p class="tm-card__sub">PDF stays on this device. Parsing runs in your browser.</p>
         </div>
         <div class="tm-card__icon" aria-hidden="true">
          <svg class="w-5 h-5 text-purple-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" preserveAspectRatio="xMidYMid meet">
           <path d="M12 16V4" />
           <path d="M8 8l4-4 4 4" />
           <path d="M4 20h16" />
           <path d="M6 16v2a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-2" />
          </svg>
         </div>
        </div>

        <div class="tm-card__body">
         <div>
          <label class="block text-white/80 text-sm font-semibold mb-3" for="brand-logo">Firm Logo (Optional)</label>
          <input id="brand-logo" type="file" accept="image/*" class="input-field input-field-light rounded-xl" />
          <p class="text-xs text-white/50 mt-2">Your branding is available in report preview and download mode.</p>
         </div>

         <div>
          <label class="block text-white/80 text-sm font-semibold mb-3" for="transcript-pdf">Transcript PDF</label>
          <input id="transcript-pdf" type="file" accept="application/pdf" class="input-field input-field-light rounded-xl" />
          <p class="text-xs text-white/50 mt-2">Choose a PDF, or use the drop zone below. <a href="/sample-transcript-format.html" class="text-purple-300 hover:text-white underline" onclick="event.preventDefault(); openBestFormatOverlay();">Click here to view best format.</a></p>
         </div>

         <!-- Keep these classes for the current JS selector, plus tm-dropzone for styling consistency -->
         <div class="tm-dropzone border-2 border-dashed border-purple-500/50 bg-purple-500/5">
          <svg class="w-5 h-5 text-purple-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
           <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10" />
          </svg>
          <p class="text-white font-semibold mb-1">Drop PDF here or click to browse</p>
          <p class="text-white/50 text-sm">Accepts IRS transcripts (Account, Return, Wage &amp; Income)</p>
         </div>

         <button id="parse-btn" disabled class="tm-btn-primary">Parse PDF</button>

         <div class="tm-note">
          <div class="tm-note__row">
           <span class="w-8 h-8 rounded-xl flex items-center justify-center border border-emerald-400/25 bg-emerald-400/10">
            <svg class="w-5 h-5 text-purple-300" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" preserveAspectRatio="xMidYMid meet">
             <path d="M12 2l7 4v6c0 5-3 9-7 10-4-1-7-5-7-10V6l7-4Z" />
             <path d="M9.5 12.2l1.8 1.8 3.6-3.8" />
            </svg>
           </span>
           <div class="leading-tight">
            <div class="tm-note__kicker">Runs locally</div>
            <div class="tm-note__text">No PDF uploads</div>
           </div>
          </div>
         </div>
        </div>
       </div>

       <!-- Card 2: Token + Preview & Download -->
       <div class="tm-card">
        <div class="tm-card__head">
         <div>
          <h3 class="tm-card__title text-lg"><span class="inline-flex align-middle mr-2" aria-hidden="true">
            <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" fill="rgba(251,191,36,0.16)" stroke="rgba(251,191,36,0.9)" stroke-width="1.6"/>
              <text x="12" y="16" text-anchor="middle" font-size="10" font-weight="800" fill="rgba(251,191,36,0.95)" font-family="DM Sans, ui-sans-serif, system-ui">2</text>
            </svg>
          </span>Enter Your Token</h3>
          <p class="tm-card__sub">Enter your token ID to unlock parsing.</p>
         </div>
         <div class="flex items-center">
          <span id="token-indicator" class="inline-flex items-center justify-center w-11 h-11 rounded-[0.9rem] border border-white/10 bg-white/5" aria-label="Token status" title="Token status">
            <!-- set by JS -->
          </span>
         </div>
        </div>

        <div class="tm-card__body">
         <!-- Step 2: Token -->
         <div>
          <label class="block text-white/80 text-sm font-semibold mb-2" for="token-id">Token ID</label>
          <input id="token-id" type="text" class="input-field input-field-light rounded-xl" placeholder="Paste your token ID" autocomplete="off" />
          <div class="mt-2 flex items-center justify-between gap-4">
           <div id="token-pill" class="text-xs font-extrabold text-white/60">Available: â€” of â€”</div>
           <button id="token-save" type="button" class="text-xs font-extrabold text-purple-200 hover:text-white transition">Save token</button>
          </div>
          </div>

         <div class="tm-note">
          <div class="tm-note__row">
           <span class="w-8 h-8 rounded-xl flex items-center justify-center border border-emerald-400/25 bg-emerald-400/10">
            <svg class="w-5 h-5 text-purple-300" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" preserveAspectRatio="xMidYMid meet">
             <path d="M12 2l7 4v6c0 5-3 9-7 10-4-1-7-5-7-10V6l7-4Z" />
             <path d="M9.5 12.2l1.8 1.8 3.6-3.8" />
            </svg>
           </span>
           <div class="leading-tight">
            <div class="tm-note__kicker">Token packages available</div>
            <div class="tm-note__text">Available in 10, 25, and 100 credit bundles.</div>
           </div>
          </div>
         </div>

         <!-- Step 3: Preview & Download -->
         <div class="pt-2">
          <div class="flex items-center justify-between gap-4">
           <div>
            <div class="text-white font-extrabold"><span class="inline-flex align-middle mr-2" aria-hidden="true">
              <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="rgba(251,191,36,0.16)" stroke="rgba(251,191,36,0.9)" stroke-width="1.6"/>
                <text x="12" y="16" text-anchor="middle" font-size="10" font-weight="800" fill="rgba(251,191,36,0.95)" font-family="DM Sans, ui-sans-serif, system-ui">3</text>
              </svg>
            </span>Preview &amp; Download Report</div>
            <div class="text-xs text-white/55 mt-1">Click to sample or preview output. Download unlocks with tokens.</div>
           </div>
           <div class="tm-card__icon" aria-hidden="true">
            <svg class="w-5 h-5 text-purple-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" preserveAspectRatio="xMidYMid meet">
             <path d="M14 2H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8Z" />
             <path d="M14 2v6h6" />
             <path d="M8 13h8" />
             <path d="M8 17h6" />
             <path d="M17.5 15.5l1 1 2-2" />
            </svg>
           </div>
          </div>

          <div class="mt-4 space-y-4 text-sm">
           <div class="flex justify-between items-center pb-3 border-b border-white/10"><span class="text-white/70">Transcript Type</span> <span class="text-white font-semibold">Form 4506-C (Account)</span></div>
           <div class="flex justify-between items-center pb-3 border-b border-white/10"><span class="text-white/70">Codes Found</span> <span class="text-purple-300 font-extrabold">24 codes</span></div>
           <div class="flex justify-between items-center pb-3 border-b border-white/10"><span class="text-white/70">Processing Time</span> <span class="text-white font-semibold">8.3 seconds</span></div>

           <div class="mt-4 pt-4 border-t border-white/10">
            <p class="text-white/50 text-xs mb-3 font-extrabold tracking-wide">SAMPLE CODES EXTRACTED</p>
            <div class="flex flex-wrap gap-2">
             <span class="bg-white/5 border border-white/10 text-purple-200 px-2 py-1 rounded-lg text-xs font-mono">150</span>
             <span class="bg-white/5 border border-white/10 text-purple-200 px-2 py-1 rounded-lg text-xs font-mono">290</span>
             <span class="bg-white/5 border border-white/10 text-purple-200 px-2 py-1 rounded-lg text-xs font-mono">670</span>
             <span class="bg-white/5 border border-white/10 text-purple-200 px-2 py-1 rounded-lg text-xs font-mono">806</span>
             <span class="bg-white/5 border border-white/10 text-purple-200 px-2 py-1 rounded-lg text-xs font-mono">846</span>
            </div>
           </div>
          </div>

          <div class="mt-5 grid grid-cols-2 gap-4">
           <button id="preview-report-btn" type="button" class="tm-btn-secondary flex items-center justify-center gap-2" onclick="openTranscriptReportPreview()">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12Z" />
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
            </svg>
            Preview Report
           </button>

           <button disabled class="w-full rounded-[0.9rem] px-4 py-[0.85rem] text-sm font-extrabold bg-white/5 border border-white/10 text-white/35 cursor-not-allowed opacity-70 flex items-center justify-center gap-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 0 0-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
            Download
           </button>
          </div>

          <div class="tm-note mt-6" style="border-color: rgba(168, 85, 247, 0.22); background: rgba(168, 85, 247, 0.08);">
           <div class="tm-note__row">
            <span class="w-8 h-8 rounded-xl flex items-center justify-center border border-purple-500/30 bg-purple-500/10">
             <svg class="w-5 h-5 text-purple-300" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" preserveAspectRatio="xMidYMid meet">
              <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12Z" />
              <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
             </svg>
            </span>
            <div class="leading-tight">
             <div class="tm-note__kicker" style="color: rgba(233, 213, 255, 0.95);">Preview mode</div>
             <div class="tm-note__text" style="color: rgba(226, 232, 240, 0.7);">This sample shows report quality. Full access unlocks unlimited processing.</div>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
    </section
    <!-- Features Section -->
    <section id="features" class="py-20 bg-white">
     <div class="max-w-7xl mx-auto px-6">
      <div class="text-center max-w-3xl mx-auto mb-16">
       <div class="counter inline-block mb-4">
        <span class="inline-flex items-center gap-3">
         <span class="w-9 h-9 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-500/35 to-fuchsia-500/20 border border-purple-400/30 shadow-sm">
          <svg class="w-5 h-5 text-purple-300" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round">
           <path d="M12 2l2.2 6.6L21 10l-5.6 3.9L17.5 21 12 17.3 6.5 21l2.1-7.1L3 10l6.8-1.4L12 2Z" />
          </svg>
         </span>
         <span class="font-semibold">Powerful Features</span>
        </span>
       </div>
       <h2 class="font-display text-3xl md:text-4xl font-bold text-midnight mb-6">Everything You Need to Master IRS Transcripts</h2>
      </div>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
       <div class="card-elevated p-8">
        <div class="feature-icon mb-6">
         <svg class="w-7 h-7" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
         </svg>
        </div>
        <h3 class="font-bold text-xl text-midnight mb-3">Smart PDF Parsing</h3>
        <p class="text-gray-600">Upload PDFs directly from SOAR or IRS accounts. Our AI extracts every code perfectly. Runs locally on your computer.</p>
       </div>
       <div class="card-elevated p-8">
        <div class="feature-icon mb-6">
         <svg class="w-7 h-7" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
         </svg>
        </div>
        <h3 class="font-bold text-xl text-midnight mb-3">IRS Code Interpretation</h3>
        <p class="text-gray-600">Automatic interpretation using official IRS publications. Always accurate, always current.</p>
       </div>
       <div class="card-elevated p-8">
        <div class="feature-icon mb-6">
         <svg class="w-7 h-7" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
         </svg>
        </div>
        <h3 class="font-bold text-xl text-midnight mb-3">Branded Reports</h3>
        <p class="text-gray-600">Add your logo and firm colors. Every report looks like you spent hours designing it.</p>
       </div>
       <div class="card-elevated p-8">
        <div class="feature-icon mb-6">
         <svg class="w-7 h-7" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
         </svg>
        </div>
        <h3 class="font-bold text-xl text-midnight mb-3">Lightning Fast</h3>
        <p class="text-gray-600">Process transcripts in seconds, not hours. Handle multiple clients back-to-back.</p>
       </div>
       <div class="card-elevated p-8">
        <div class="feature-icon mb-6">
         <svg class="w-7 h-7" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
         </svg>
        </div>
        <h3 class="font-bold text-xl text-midnight mb-3">Unlimited Use</h3>
        <p class="text-gray-600">One purchase, unlimited transcripts. No per-report fees eating into your margins.</p>
       </div>
       <div class="card-elevated p-8">
        <div class="feature-icon mb-6">
         <svg class="w-7 h-7" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
         </svg>
        </div>
        <h3 class="font-bold text-xl text-midnight mb-3">Secure &amp; Private</h3>
        <p class="text-gray-600">Runs locally on your computer. Client data never leaves your machine.</p>
       </div>
      </div>
     </div>
    </section><!-- What This Solves Section -->
    <section id="testimonials" class="py-20 bg-slate-800/40">
     <div class="max-w-7xl mx-auto px-6">
      <div class="text-center max-w-3xl mx-auto mb-16">
       <div class="counter inline-block mb-4">
        <span class="inline-flex items-center gap-3">
         <span class="w-9 h-9 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-500/35 to-cyan-500/15 border border-purple-400/30 shadow-sm">
          <svg class="w-5 h-5 text-purple-300" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round">
           <path d="M11 4a2 2 0 0 1 4 0v1h2a2 2 0 0 1 2 2v2h-1a2 2 0 1 0 0 4h1v2a2 2 0 0 1-2 2h-2v-1a2 2 0 1 0-4 0v1H9a2 2 0 0 1-2-2v-2h1a2 2 0 1 0 0-4H7V7a2 2 0 0 1 2-2h2V4Z" />
           <path d="M12 12h0" />
          </svg>
         </span>
         <span class="font-semibold">The Real Problem</span>
        </span>
       </div>
       <h2 class="font-display text-3xl md:text-4xl font-bold text-white mb-6">What This Tool Solves</h2>
       <p class="text-lg text-white/70">Transcripts are readable to computers and terrifying to humans. This turns "what does this mean?" into a clean, client-ready explanation.</p>
      </div>
      <div class="grid md:grid-cols-3 gap-8">
       <div class="glass rounded-2xl p-8 border border-slate-700/30 h-full flex flex-col">
        <div class="feature-icon mb-6">
         <svg class="w-7 h-7 block" aria-hidden="true" fill="none" stroke="currentColor" viewbox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M12 6v6l4 2" /> <path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-white mb-3">Stop Wasting Billable Time</h3>
        <p class="text-slate-300">No more re-explaining the same transaction codes to different clients. Parse, summarize, and move on with your life.</p>
        <ul class="mt-5 space-y-2 text-sm text-white/70">
         <li class="flex gap-2"><span class="text-purple-300">â€¢</span><span>Find TC codes fast</span></li>
         <li class="flex gap-2"><span class="text-purple-300">â€¢</span><span>Generate a consistent explanation</span></li>
         <li class="flex gap-2"><span class="text-purple-300">â€¢</span><span>Keep a clean client narrative</span></li>
        </ul>
       </div>
       <div class="glass rounded-2xl p-8 border border-slate-700/30 h-full flex flex-col">
        <div class="feature-icon mb-6">
         <svg class="w-7 h-7 block" aria-hidden="true" fill="none" stroke="currentColor" viewbox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M7 8h10" /> <path d="M7 12h6" /> <path d="M7 16h8" /> <path d="M5 4h14a2 2 0 0 1 2 2v13a1 1 0 0 1-1 1H7l-4 3V6a2 2 0 0 1 2-2Z" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-white mb-3">Reduce Client Anxiety</h3>
        <p class="text-slate-300">Most transcripts look scary even when nothing is wrong. A clean summary builds trust and stops panic emails.</p>
        <ul class="mt-5 space-y-2 text-sm text-white/70">
         <li class="flex gap-2"><span class="text-purple-300">â€¢</span><span>Plain-English "what happened"</span></li>
         <li class="flex gap-2"><span class="text-purple-300">â€¢</span><span>What needs action, what doesn't</span></li>
         <li class="flex gap-2"><span class="text-purple-300">â€¢</span><span>Client-ready report format</span></li>
        </ul>
       </div>
       <div class="glass rounded-2xl p-8 border border-slate-700/30 h-full flex flex-col">
        <div class="feature-icon mb-6">
         <svg class="w-7 h-7 block" aria-hidden="true" fill="none" stroke="currentColor" viewbox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M6 18h12" /> <path d="M8 22h8" /> <path d="M12 2a7 7 0 0 1 7 7c0 2.2-1 3.7-2.2 5.1-.6.7-.9 1.4-1.1 2.2H8.3c-.2-.8-.5-1.5-1.1-2.2C6 12.7 5 11.2 5 9a7 7 0 0 1 7-7Z" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-white mb-3">Make "Weird Transcript Stuff" Understandable</h3>
        <p class="text-slate-300">People get stuck on the transactions list and random codes. This translates those into next steps you can stand behind.</p>
        <ul class="mt-5 space-y-2 text-sm text-white/70">
         <li class="flex gap-2"><span class="text-purple-300">â€¢</span><span>Highlight holds, notices, and refunds</span></li>
         <li class="flex gap-2"><span class="text-purple-300">â€¢</span><span>Explain common code patterns</span></li>
         <li class="flex gap-2"><span class="text-purple-300">â€¢</span><span>Keep your messaging consistent</span></li>
        </ul>
       </div>
      </div>
      <div class="mt-12 gradient-border">
       <div class="glass rounded-[20px] p-6 sm:p-7">
        <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3">
         <div>
          <div class="text-white font-semibold">
           <span class="inline-flex items-center gap-3">
         <span class="w-9 h-9 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-500/35 to-indigo-500/20 border border-purple-400/30 shadow-sm">
          <svg class="w-5 h-5 text-purple-300" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round">
           <path d="M12 3v4" />
           <path d="M12 17v4" />
           <path d="M4.2 6.2l2.8 2.8" />
           <path d="M17 15l2.8 2.8" />
           <path d="M3 12h4" />
           <path d="M17 12h4" />
           <path d="M6.2 17.8l2.8-2.8" />
           <path d="M15 9l2.8-2.8" />
           <circle cx="12" cy="12" r="3" />
          </svg>
         </span>
         <span class="font-semibold">Why This Exists</span>
        </span>
          </div>
          <div class="text-sm text-white/70 mt-1">
           Because this exact confusion shows up online every day. Here are a few real examples.
          </div>
         </div>
         <div class="text-xs text-white/50">
          Short excerpts â€¢ linked sources
         </div>
        </div>
        <div class="mt-5 grid md:grid-cols-2 gap-4"><a class="block rounded-2xl border border-slate-700/25 bg-slate-950/35 p-5 hover:border-purple-500/40 transition" href="https://www.reddit.com/r/tax/comments/1q40o5h/can_someone_please_explain_what_my_tax_return/" target="_blank" rel="noopener">
          <div class="text-xs text-white/50 mb-2">
           r/tax
          </div>
          <div class="text-sm text-white">
           "I'm really just confused on the 'Transactions' section."
          </div>
          <div class="mt-3 text-xs text-purple-300">
           Open thread â†’
          </div></a> <a class="block rounded-2xl border border-slate-700/25 bg-slate-950/35 p-5 hover:border-purple-500/40 transition" href="https://www.reddit.com/r/IRS/comments/1jn67nh/what_does_this_mean_i_have_a_570_code_806_code/" target="_blank" rel="noopener">
          <div class="text-xs text-white/50 mb-2">
           r/IRS
          </div>
          <div class="text-sm text-white">
           "The Transaction Code 570 is a refund hold placed on the account."
          </div>
          <div class="mt-3 text-xs text-purple-300">
           Open thread â†’
          </div></a> <a class="block rounded-2xl border border-slate-700/25 bg-slate-950/35 p-5 hover:border-purple-500/40 transition" href="https://www.reddit.com/r/IRS/comments/1igrqqr/federal_tax_refund/" target="_blank" rel="noopener">
          <div class="text-xs text-white/50 mb-2">
           r/IRS
          </div>
          <div class="text-sm text-white">
           "What is an 05'er? I've got a 150 code and an 806 code."
          </div>
          <div class="mt-3 text-xs text-purple-300">
           Open thread â†’
          </div></a> <a class="block rounded-2xl border border-slate-700/25 bg-slate-950/35 p-5 hover:border-purple-500/40 transition" href="https://www.reddit.com/r/IRS/comments/1ike0nw/570971_both_dated_224/" target="_blank" rel="noopener">
          <div class="text-xs text-white/50 mb-2">
           r/IRS
          </div>
          <div class="text-sm text-white">
           "The Transaction Code 570 is preventing the refund from being scheduled."
          </div>
          <div class="mt-3 text-xs text-purple-300">
           Open thread â†’
          </div></a>
        </div>
        <div class="mt-6 text-xs text-white/50">
         Note: These are public posts. We show short excerpts and link to the source. No endorsement, no claims, just reality.
        </div>
       </div>
      </div>
     </div>
    </section><!-- CTA Section -->
    <section class="py-20 gradient-hero">
     <div class="max-w-4xl mx-auto px-6 text-center">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-white mb-6">Ready to Transform Your Transcript Workflow?</h2>
      <p class="text-xl text-white/80 mb-8">Join thousands of tax professionals who've reclaimed their time and impressed their clients.</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center"><button onclick="showPage('lead-magnet')" class="btn-primary text-lg"> Get Your Free Guide First â†’ </button> <button onclick="showPage('sales-page')" class="btn-secondary"> Skip to Purchase </button>
      </div>
     </div>
    </section><!-- Footer -->
    <div data-partial="partials/footer.html"></div></section><!-- Lead Magnet Page -->
   <section id="lead-magnet" class="page-section">
    <div class="min-h-full gradient-hero flex items-center py-12">
     <div class="max-w-6xl mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center">
      <div class="text-white"><button onclick="showPage('landing-page')" class="flex items-center gap-2 text-white/70 hover:text-white mb-8 transition-colors">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg> Back to Home </button>
       <div class="counter inline-block mb-4">
        ðŸ“š FREE DOWNLOAD
       </div>
       <h1 class="font-display text-3xl md:text-4xl lg:text-5xl font-bold leading-tight mb-6">The Ultimate Guide to IRS Transcript Codes</h1>
       <p class="text-xl text-white/80 mb-8">Stop guessing what those cryptic codes mean. Our comprehensive 32-page guide breaks down every transcript code you'll encounter, complete with real-world examples and action steps.</p>
       <div class="space-y-4 mb-8">
        <div class="check-item">
         <div class="check-icon">
          âœ“
         </div>
         <div>
          <p class="font-semibold">Complete Code Reference</p>
          <p class="text-white/70 text-sm">All 150+ IRS transcript codes explained in plain English</p>
         </div>
        </div>
        <div class="check-item">
         <div class="check-icon">
          âœ“
         </div>
         <div>
          <p class="font-semibold">Real Client Scenarios</p>
          <p class="text-white/70 text-sm">See how codes appear in actual transcripts with annotations</p>
         </div>
        </div>
        <div class="check-item">
         <div class="check-icon">
          âœ“
         </div>
         <div>
          <p class="font-semibold">Quick Reference Chart</p>
          <p class="text-white/70 text-sm">Printable cheat sheet for your desk</p>
         </div>
        </div>
        <div class="check-item">
         <div class="check-icon">
          âœ“
         </div>
         <div>
          <p class="font-semibold">Red Flag Alerts</p>
          <p class="text-white/70 text-sm">Codes that require immediate attention highlighted</p>
         </div>
        </div>
       </div>
      </div>
      <div class="card-elevated p-8 max-w-md mx-auto w-full">
       <h3 class="font-display text-2xl font-bold text-midnight text-center mb-2">Get Instant Access</h3>
       <p class="text-gray-500 text-center mb-6">Enter your details below</p>
       <form id="lead-form" class="space-y-4" onsubmit="handleLeadFormSubmit(event)">
        <div><label for="lead-name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label> <input type="text" id="lead-name" placeholder="John Smith" class="input-field input-field-light" required>
        </div>
        <div><label for="lead-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label> <input type="email" id="lead-email" placeholder="john@taxfirm.com" class="input-field input-field-light" required>
        </div>
        <div><label for="lead-firm" class="block text-sm font-medium text-gray-700 mb-1">Firm Name (Optional)</label> <input type="text" id="lead-firm" placeholder="Smith Tax Services" class="input-field input-field-light">
        </div><button type="submit" id="lead-submit-btn" class="btn-primary w-full text-center"> Download Free Guide â†’ </button>
        <p class="text-xs text-gray-400 text-center">We respect your privacy. Unsubscribe anytime.</p>
       </form>
      </div>
     </div>
    </div>
   </section><!-- Thank You Page -->
   <section id="thank-you" class="page-section">
    <div class="min-h-full flex items-center py-12">
     <div class="max-w-4xl mx-auto px-6 text-center">
      <div class="w-24 h-24 bg-sage rounded-full flex items-center justify-center mx-auto mb-8">
       <svg class="w-5 h-5 text-purple-300" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
       </svg>
      </div>
      <h1 class="font-display text-4xl md:text-5xl font-bold text-midnight mb-6">You're In! Check Your Email ðŸ“§</h1>
      <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">Your free IRS Transcript Code Guide is on its way to your inbox. While you wait, here's something even more powerful...</p>
      <div class="card-elevated p-8 md:p-12 max-w-3xl mx-auto mb-8">
       <div class="counter inline-block mb-4">
        âš¡ EXCLUSIVE OFFER
       </div>
       <h2 class="font-display text-2xl md:text-3xl font-bold text-midnight mb-4">What If You Never Had to Look Up Codes Again?</h2>
       <p class="text-gray-600 mb-6">The guide is great for learning, but <strong>TranscriptPro</strong> automates the entire process. Upload a transcript â†’ Get a beautiful, branded report in seconds.</p>
       <div class="grid md:grid-cols-3 gap-6 mb-8">
        <div class="text-center">
         <div class="text-3xl font-bold text-gold mb-2">
          8 sec
         </div>
         <div class="text-sm text-gray-500">
          Average Processing Time
         </div>
        </div>
        <div class="text-center">
         <div class="text-3xl font-bold text-gold mb-2">
          100%
         </div>
         <div class="text-sm text-gray-500">
          Code Accuracy
         </div>
        </div>
        <div class="text-center">
         <div class="text-3xl font-bold text-gold mb-2">
          âˆž
         </div>
         <div class="text-sm text-gray-500">
          Unlimited Reports
         </div>
        </div>
       </div><button onclick="showPage('sales-page')" class="btn-primary text-lg"> See TranscriptPro in Action â†’ </button>
      </div><button onclick="showPage('landing-page')" class="text-gray-500 hover:text-midnight transition-colors"> â† Return to Homepage </button>
     </div>
    </div>
   </section><!-- Sales Page -->
   <section id="sales-page" class="page-section">
    <!-- Sales Nav -->
    <nav class="bg-midnight sticky top-0 z-50">
     <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      <button onclick="showPage('landing-page')" class="flex items-center gap-2 text-white/70 hover:text-white transition-colors">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
       </svg>
       Back
      </button>

      <span id="sales-product-name" class="text-white font-bold">TranscriptPro<\/span>
      <span id="sales-price" class="sr-only">$797/mo</span>

      <button onclick="showCheckout('credits_25')" class="btn-primary text-sm py-2 px-4">Buy Credits<\/button>
     </div>
    </nav>

    <!-- Sales Hero -->
    <header class="gradient-hero py-20">
     <div class="max-w-5xl mx-auto px-6 text-center text-white">
      <div class="counter inline-block mb-6">âš™ï¸ Enterprise CRM for Tax Professionals</div>
      <h1 class="font-display text-4xl md:text-5xl lg:text-6xl font-bold leading-tight mb-6">Serverless Tax Practice Automation</h1>
      <p class="text-xl text-white/80 mb-10 max-w-3xl mx-auto">Contract-driven workflows. Immutable audit trails. ClickUp integration. Built on Cloudflare for 99.99% uptime, zero ops overhead.</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
       <button onclick="showCheckout('credits_25')" class="btn-primary text-lg">Buy Credits<\/button>
       <button onclick="document.getElementById('pricing').scrollIntoView({behavior:'smooth'})" class="btn-secondary">Transparent Pricing</button>
      </div>
     </div>
    </header>

    <!-- Stack -->
    <section class="py-20 bg-slate-800/40">
     <div class="max-w-7xl mx-auto px-6">
      <div class="text-center max-w-3xl mx-auto mb-14">
       <div class="counter inline-block mb-4">The Tax Monitor Pro Stack</div>
       <h2 class="font-display text-3xl md:text-4xl font-bold text-white mb-3">Designed like enterprise software. Operated like a landing page.</h2>
       <p class="text-white/70">Four layers. One purpose: reliable automation with receipts you can actually defend.</p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="w-12 h-12 rounded-2xl flex items-center justify-center mb-5 bg-white/5 border border-white/10">
         <span class="text-xl">â˜ï¸</span>
        </div>
        <h3 class="text-white font-semibold text-lg mb-2">Presentation Layer</h3>
        <p class="text-white/70 text-sm leading-relaxed">Fast, secure UI served from Cloudflare Pages. Always online.</p>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="w-12 h-12 rounded-2xl flex items-center justify-center mb-5 bg-white/5 border border-white/10">
         <span class="text-xl">âš¡</span>
        </div>
        <h3 class="text-white font-semibold text-lg mb-2">Logic Layer</h3>
        <p class="text-white/70 text-sm leading-relaxed">Cloudflare Workers validate, process, and orchestrate all events.</p>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="w-12 h-12 rounded-2xl flex items-center justify-center mb-5 bg-white/5 border border-white/10">
         <span class="text-xl">ðŸ’¾</span>
        </div>
        <h3 class="text-white font-semibold text-lg mb-2">Storage Layer</h3>
        <p class="text-white/70 text-sm leading-relaxed">Cloudflare R2 stores all canonical data and immutable receipts.</p>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="w-12 h-12 rounded-2xl flex items-center justify-center mb-5 bg-white/5 border border-white/10">
         <span class="text-xl">âœ…</span>
        </div>
        <h3 class="text-white font-semibold text-lg mb-2">Execution Layer</h3>
        <p class="text-white/70 text-sm leading-relaxed">ClickUp tasks for accounts, orders, and support workflows.</p>
       </div>
      </div>
     </div>
    </section>

    <!-- Capabilities -->
    <section class="py-20 bg-midnight">
     <div class="max-w-7xl mx-auto px-6">
      <div class="text-center max-w-3xl mx-auto mb-14">
       <div class="counter inline-block mb-4">Enterprise Capabilities Built In</div>
       <h2 class="font-display text-3xl md:text-4xl font-bold text-white mb-3">The stuff you wish your current stack did by default</h2>
       <p class="text-white/70">Clear contracts. No mystery state. No duplicated work. No "who changed this" nightmares.</p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="flex items-start gap-3">
         <div class="mt-0.5 w-6 h-6 rounded-full bg-purple-500/20 border border-purple-400/20 flex items-center justify-center text-purple-200 text-sm font-bold">âœ“</div>
         <div>
          <h3 class="text-white font-semibold mb-2">Contract-Driven Validation</h3>
          <p class="text-white/70 text-sm leading-relaxed">JSON contracts define all business logic. No ambiguity. Complete audit trails on every event.</p>
         </div>
        </div>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="flex items-start gap-3">
         <div class="mt-0.5 w-6 h-6 rounded-full bg-purple-500/20 border border-purple-400/20 flex items-center justify-center text-purple-200 text-sm font-bold">âœ“</div>
         <div>
          <h3 class="text-white font-semibold mb-2">Idempotent &amp; Retry-Safe</h3>
          <p class="text-white/70 text-sm leading-relaxed">Every event is append-only and idempotent. No duplicate tasks, emails, or records.</p>
         </div>
        </div>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="flex items-start gap-3">
         <div class="mt-0.5 w-6 h-6 rounded-full bg-purple-500/20 border border-purple-400/20 flex items-center justify-center text-purple-200 text-sm font-bold">âœ“</div>
         <div>
          <h3 class="text-white font-semibold mb-2">ClickUp Integration</h3>
          <p class="text-white/70 text-sm leading-relaxed">All workflow activity projected as templated tasks. R2 is the source of truth, ClickUp is a projection.</p>
         </div>
        </div>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="flex items-start gap-3">
         <div class="mt-0.5 w-6 h-6 rounded-full bg-purple-500/20 border border-purple-400/20 flex items-center justify-center text-purple-200 text-sm font-bold">âœ“</div>
         <div>
          <h3 class="text-white font-semibold mb-2">Multi-Auth Security</h3>
          <p class="text-white/70 text-sm leading-relaxed">Google OAuth, Magic Link, SAML/OIDC. Built-in 2848 two-signature flows.</p>
         </div>
        </div>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="flex items-start gap-3">
         <div class="mt-0.5 w-6 h-6 rounded-full bg-purple-500/20 border border-purple-400/20 flex items-center justify-center text-purple-200 text-sm font-bold">âœ“</div>
         <div>
          <h3 class="text-white font-semibold mb-2">Event-Driven Automation</h3>
          <p class="text-white/70 text-sm leading-relaxed">Triggers from logins, uploads, payments, appointments, forms, and tasks. Fully automated.</p>
         </div>
        </div>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="flex items-start gap-3">
         <div class="mt-0.5 w-6 h-6 rounded-full bg-purple-500/20 border border-purple-400/20 flex items-center justify-center text-purple-200 text-sm font-bold">âœ“</div>
         <div>
          <h3 class="text-white font-semibold mb-2">Immutable Receipt System</h3>
          <p class="text-white/70 text-sm leading-relaxed">Every event logged, validated, and cryptographically secured. Complete compliance history.</p>
         </div>
        </div>
       </div>
      </div>
     </div>
    </section>

    <!-- Tech Stack -->
    <section class="py-20 bg-slate-800/40">
     <div class="max-w-7xl mx-auto px-6">
      <div class="text-center max-w-3xl mx-auto mb-14">
       <div class="counter inline-block mb-4">Fully Integrated Tech Stack</div>
       <h2 class="font-display text-3xl md:text-4xl font-bold text-white mb-3">Best-of-breed tools, glued together correctly</h2>
       <p class="text-white/70">No duct tape. No surprise state. No "it works on Tuesdays" integrations.</p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="text-2xl mb-4">ðŸ”Œ</div>
        <h3 class="text-white font-semibold mb-2">Cloudflare</h3>
        <p class="text-white/70 text-sm leading-relaxed">Pages, Workers, and R2 for global edge computing and immutable storage.</p>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="text-2xl mb-4">âœ”ï¸</div>
        <h3 class="text-white font-semibold mb-2">ClickUp</h3>
        <p class="text-white/70 text-sm leading-relaxed">Native task management projection. All workflow activity visible in real-time.</p>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="text-2xl mb-4">ðŸ’³</div>
        <h3 class="text-white font-semibold mb-2">Stripe</h3>
        <p class="text-white/70 text-sm leading-relaxed">PCI-compliant payments with webhook signature validation and idempotent receipts.</p>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="text-2xl mb-4">ðŸ“§</div>
        <h3 class="text-white font-semibold mb-2">Google Workspace</h3>
        <p class="text-white/70 text-sm leading-relaxed">Secure email, calendar, and document management for your team.</p>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="text-2xl mb-4">ðŸ“…</div>
        <h3 class="text-white font-semibold mb-2">Cal.com</h3>
        <p class="text-white/70 text-sm leading-relaxed">Appointment scheduling with webhook integration and event-driven workflows.</p>
       </div>

       <div class="glass rounded-2xl p-7 border border-slate-700/30">
        <div class="text-2xl mb-4">ðŸ”</div>
        <h3 class="text-white font-semibold mb-2">OAuth &amp; SAML</h3>
        <p class="text-white/70 text-sm leading-relaxed">Enterprise SSO support with strict validation and compliance logging.</p>
       </div>
      </div>
     </div>
    </section>

    <!-- Pricing -->
    <section id="pricing" class="py-20 bg-midnight">
     <div class="max-w-7xl mx-auto px-6">
      <div class="text-center max-w-3xl mx-auto mb-14">
       <div class="counter inline-block mb-4">Transparent, Scalable Pricing</div>
       <h2 class="font-display text-3xl md:text-4xl font-bold text-white mb-3">Pick the plan that matches your practice</h2>
       <p class="text-white/70">All plans include 30-day free trial. No credit card required. Cancel anytime.</p>
      </div>

      <div class="grid lg:grid-cols-3 gap-6 items-stretch">
       <div class="glass rounded-2xl p-8 border border-slate-700/30 flex flex-col">
        <div class="text-white font-semibold text-lg">Starter</div>
        <div class="text-white/60 text-sm mt-1">Perfect for smaller practices</div>
        <div class="mt-6 flex items-end gap-2">
         <div class="text-4xl font-extrabold text-white">$297</div>
         <div class="text-white/60">/mo</div>
        </div>
        <ul class="mt-6 space-y-3 text-sm text-white/75">
         <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>99.99% uptime SLA</span></li>
         <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>ClickUp integration</span></li>
         <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>Email support</span></li>
         <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>Up to 500 accounts</span></li>
        </ul>
        <div class="mt-8">
         <button onclick="showCheckout('credits_10')" class="btn-secondary w-full">Buy Credits<\/button>
        </div>
       </div>

       <div class="gradient-border">
        <div class="glass rounded-[20px] p-8 border border-purple-500/30 flex flex-col h-full">
         <div class="flex items-center justify-between gap-3">
          <div>
           <div class="text-white font-semibold text-lg">Professional</div>
           <div class="text-white/60 text-sm mt-1">For growing tax practices</div>
          </div>
          <div class="counter">MOST POPULAR</div>
         </div>

         <div class="mt-6 flex items-end gap-2">
          <div class="text-4xl font-extrabold text-white">$797</div>
          <div class="text-white/60">/mo</div>
         </div>

         <ul class="mt-6 space-y-3 text-sm text-white/75">
          <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>Advanced compliance logging</span></li>
          <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>All Starter features</span></li>
          <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>Priority support</span></li>
          <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>Up to 2,500 accounts</span></li>
         </ul>

         <div class="mt-8">
          <button onclick="showCheckout('credits_25')" class="btn-primary w-full">Buy Credits<\/button>
         </div>
        </div>
       </div>

       <div class="glass rounded-2xl p-8 border border-slate-700/30 flex flex-col">
        <div class="text-white font-semibold text-lg">Enterprise</div>
        <div class="text-white/60 text-sm mt-1">For large-scale operations</div>
        <div class="mt-6 flex items-end gap-2">
         <div class="text-4xl font-extrabold text-white">Custom</div>
         <div class="text-white/60">/mo</div>
        </div>
        <ul class="mt-6 space-y-3 text-sm text-white/75">
         <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>All Professional features</span></li>
         <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>Custom integrations</span></li>
         <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>Dedicated support</span></li>
         <li class="flex items-center gap-2"><span class="text-purple-300">âœ“</span><span>Unlimited accounts</span></li>
        </ul>
        <div class="mt-8">
         <button type="button" class="btn-secondary w-full" onclick="showToast('Sales will contact you shortly (or at least pretend to).', 'success')">Contact Sales</button>
        </div>
       </div>
      </div>

      <div class="mt-10 text-center text-white/60 text-sm">Credits never expire. No refunds.</div>
     </div>
    </section>

    <!-- CTA -->
    <section class="py-20 gradient-hero">
     <div class="max-w-5xl mx-auto px-6 text-center">
      <h2 class="font-display text-3xl md:text-4xl font-bold text-white mb-6">Want a system that can explain itself?</h2>
      <p class="text-xl text-white/80 mb-8 max-w-3xl mx-auto">Most CRMs are just fancy forms. This one keeps receipts and enforces contracts so your operations stop drifting into chaos.</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
       <button onclick="showCheckout('credits_25')" class="btn-primary text-lg">Buy Credits<\/button>
       <button onclick="showPage('landing-page')" class="btn-secondary">Back to Home</button>
      </div>
     </div>
    </section>
   </section>

   <!-- Checkout Page -->
   <section id="checkout" class="page-section">
    <div class="min-h-full gradient-hero flex items-center py-12">
     <div class="max-w-6xl mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center w-full">
      <!-- Left: Order Summary -->
      <div class="card-elevated p-8">
       <h2 class="text-2xl font-bold text-white mb-6">Order Summary</h2>

       <div class="border-b border-white/10 pb-6 mb-6">
        <div class="flex items-center gap-4 mb-4">
         <div class="w-16 h-16 gradient-gold rounded-lg flex items-center justify-center text-2xl">ðŸª™</div>
         <div class="flex-1">
          <h3 id="checkout-product" class="font-bold text-white">TranscriptPro Credits</h3>
          <p class="text-white/70 text-sm">Digital good â€¢ Credits never expire â€¢ Token shareable</p>
         </div>
        </div>

        <div class="grid sm:grid-cols-3 gap-3 mt-4" role="radiogroup" aria-label="Choose credit bundle">
         <button type="button" class="bundle-option glass rounded-xl p-4 border border-white/10 text-left hover:border-purple-400/40 transition" data-bundle="credits_10">
          <div class="text-white font-extrabold">10 Credits</div>
          <div class="text-white/60 text-xs mt-1">$19 â€¢ $1.90 per parse</div>
         </button>
         <button type="button" class="bundle-option glass rounded-xl p-4 border border-purple-500/30 text-left hover:border-purple-400/50 transition" data-bundle="credits_25" aria-pressed="true">
          <div class="flex items-center justify-between gap-2">
           <div class="text-white font-extrabold">25 Credits</div>
           <span class="tm-pill">Best value</span>
          </div>
          <div class="text-white/60 text-xs mt-1">$39 â€¢ $1.56 per parse</div>
         </button>
         <button type="button" class="bundle-option glass rounded-xl p-4 border border-white/10 text-left hover:border-purple-400/40 transition" data-bundle="credits_100">
          <div class="text-white font-extrabold">100 Credits</div>
          <div class="text-white/60 text-xs mt-1">$129 â€¢ $1.29 per parse</div>
         </button>
        </div>
       </div>

       <div class="space-y-3 mb-6">
        <div class="flex justify-between text-white/70"><span>Subtotal</span> <span id="checkout-subtotal">$39</span></div>
        <div class="flex justify-between text-white/70 pb-3 border-b border-white/10"><span>Tax</span> <span id="checkout-tax">$0</span></div>
        <div class="flex justify-between text-lg font-bold text-white"><span>Total</span> <span class="text-gold" id="checkout-total">$39</span></div>
       </div>

       <div class="bg-purple-600/10 border border-purple-500/30 rounded-lg p-4 mb-6">
        <p class="text-purple-200 font-bold text-sm mb-1">Digital good</p>
        <p class="text-white/70 text-xs">Credits never expire. No refunds. Purchases create a token that can be shared.</p>
       </div>

       <div class="text-white/50 text-xs">Powered by Stripe Checkout.</div>
      </div>

      <!-- Right: Buyer Info -->
      <div class="card-elevated p-8 max-w-md mx-auto w-full">
       <h3 class="font-display text-2xl font-bold text-midnight text-center mb-2">Checkout</h3>
       <p class="text-gray-500 text-center mb-6">Secure payment. Instant delivery.</p>

       <form id="checkout-form" class="space-y-4" onsubmit="handleCheckout(event)">
        <input type="hidden" id="checkout-bundle" value="credits_25" />

        <div>
         <label for="checkout-name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
         <input type="text" id="checkout-name" placeholder="John Smith" class="input-field input-field-light" required />
        </div>

        <div>
         <label for="checkout-email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
         <input type="email" id="checkout-email" placeholder="john@taxfirm.com" class="input-field input-field-light" required />
        </div>

        <div>
         <label for="checkout-firm" class="block text-sm font-medium text-gray-700 mb-1">Firm Name</label>
         <input type="text" id="checkout-firm" placeholder="Smith Tax Services" class="input-field input-field-light" required />
        </div>

        <div class="bg-white/5 border border-white/10 rounded-lg p-3">
         <p class="text-white/70 text-xs"><strong>Note:</strong> Youâ€™ll complete payment on Stripe Checkout, then return here.</p>
        </div>

        <button type="submit" id="checkout-submit-btn" class="btn-primary w-full text-center py-3 font-semibold">Continue to Secure Checkout â†’</button>
        <p class="text-xs text-gray-400 text-center">Credits never expire. No refunds.</p>
       </form>
      </div>
     </div>
    </div>
   </section>
  </div>
  <script>
    function showPage(pageId) {
      // Hide all pages
      const pages = document.querySelectorAll('.page-section');
      pages.forEach(page => page.classList.remove('active'));
      // Show target page
      const targetPage = document.getElementById(pageId);
      if (targetPage) {
        targetPage.classList.add('active');
        window.scrollTo(0, 0);
      }
    }

    function showCheckout(bundle) {
      const b = String(bundle || 'credits_25');
      const input = document.getElementById('checkout-bundle');
      if (input) input.value = b;

      // Update UI
      const subtotalEl = document.getElementById('checkout-subtotal');
      const totalEl = document.getElementById('checkout-total');
      const productEl = document.getElementById('checkout-product');

      const map = {
        credits_10: { credits: 10, price: 19, per: '1.90', label: '10 Credits' },
        credits_100: { credits: 100, price: 129, per: '1.29', label: '100 Credits' },
        credits_25: { credits: 25, price: 39, per: '1.56', label: '25 Credits' }
      };

      const chosen = map[b] || map.credits_25;
      if (subtotalEl) subtotalEl.textContent = `$${chosen.price}`;
      if (totalEl) totalEl.textContent = `$${chosen.price}`;
      if (productEl) productEl.textContent = `TranscriptPro Credits â€” ${chosen.label}`;

      // Highlight selected bundle button
      document.querySelectorAll('.bundle-option').forEach((btn) => {
        const isOn = btn.getAttribute('data-bundle') === b;
        btn.setAttribute('aria-pressed', isOn ? 'true' : 'false');
        btn.classList.toggle('border-purple-500/30', isOn);
        btn.classList.toggle('border-white/10', !isOn);
      });

      showPage('checkout');
    }

    // Bundle selector wiring
    (function initBundles(){
      document.querySelectorAll('.bundle-option').forEach((btn) => {
        btn.addEventListener('click', () => showCheckout(btn.getAttribute('data-bundle')));
      });
    })();

    // --- Token UX (client-side only) --- (client-side only) ---
    (function initTokenGate(){
      const tokenInput = document.getElementById('token-id');
      const tokenSave = document.getElementById('token-save');
      const tokenPill = document.getElementById('token-pill');
      const tokenIndicator = document.getElementById('token-indicator');
      const parseBtn = document.getElementById('parse-btn');
      const pdfInput = document.getElementById('transcript-pdf');

      function setPill(text){ if (tokenPill) tokenPill.textContent = text; }
      function setParseEnabled(on){ if (parseBtn) parseBtn.disabled = !on; }

      function read(){
        try { return localStorage.getItem('tm_token_id') || ''; } catch { return ''; }
      }

      function write(v){
        try { localStorage.setItem('tm_token_id', v); } catch {}
      }

      function hasToken(){
        return !!String((tokenInput && tokenInput.value) || read() || '').trim();
      }

      function hasPdf(){
        return !!(pdfInput && pdfInput.files && pdfInput.files.length);
      }

      function setTokenIcon(isSet){
        if (!tokenIndicator) return;
        // â€œSetâ€ = check. â€œNot setâ€ = lock. Humans love icons because reading is hard.
        tokenIndicator.innerHTML = isSet
          ? `<svg class="w-5 h-5 text-purple-300" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="8" />
              <path d="M9.5 9.5h5" />
              <path d="M9.5 12h5" />
              <path d="M9.5 14.5h5" />
              <path d="M16.8 8.2l2.6 2.6" />
              <path d="M17.4 6.6l1.8 1.8" />
              <path d="M18.6 12.2l1.2 1.2-2.6 2.6" />
            </svg>`
          : `<svg class="w-5 h-5 text-purple-300" aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="8" />
              <path d="M9.5 9.5h5" />
              <path d="M9.5 12h5" />
              <path d="M9.5 14.5h5" />
              <path d="M17 7.5c.7.6 1.2 1.5 1.4 2.5" />
            </svg>`;
        tokenIndicator.title = isSet ? 'Token saved' : 'Token required';
      }

      function applyTokenUI(){
        // Pill stays as availability. Token status is icon-only.
        setPill('Available: â€” of â€”');
        setTokenIcon(hasToken());
      }

      function applyGate(){
        setParseEnabled(hasToken() && hasPdf());
      }

      // init
      const existing = read();
      if (tokenInput) tokenInput.value = existing;
      applyTokenUI();
      applyGate();

      tokenSave && tokenSave.addEventListener('click', () => {
        const v = (tokenInput && tokenInput.value) ? tokenInput.value.trim() : '';
        write(v);
        applyTokenUI();
        applyGate();
      });

      tokenInput && tokenInput.addEventListener('input', () => {
        applyTokenUI();
        applyGate();
      });

      pdfInput && pdfInput.addEventListener('change', () => {
        applyGate();
      });

      // Optional: let the dashed drop zone open the file picker
      const dropZone = document.querySelector('.border-2.border-dashed');
      if (dropZone && pdfInput){
        dropZone.addEventListener('click', () => pdfInput.click());
        dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('border-purple-400/80'); });
        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('border-purple-400/80'));
        dropZone.addEventListener('drop', (e) => {
          e.preventDefault();
          dropZone.classList.remove('border-purple-400/80');
          const file = e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files[0];
          if (!file) return;
          if (file.type !== 'application/pdf'){
            alert('Please drop a PDF file.');
            return;
          }
          const dt = new DataTransfer();
          dt.items.add(file);
          pdfInput.files = dt.files;
          applyGate();
        });
      }
    })();

    function handleLeadFormSubmit(e) {
      e.preventDefault();
      const name = document.getElementById('lead-name').value;
      const email = document.getElementById('lead-email').value;
      showPage('thank-you');
    }

    function handleCheckout(e) {
      e.preventDefault();

      const btn = document.getElementById('checkout-submit-btn');
      const bundle = document.getElementById('checkout-bundle')?.value || 'credits_25';
      const name = document.getElementById('checkout-name')?.value?.trim() || '';
      const email = document.getElementById('checkout-email')?.value?.trim() || '';
      const firm = document.getElementById('checkout-firm')?.value?.trim() || '';

      if (!name || !email || !firm) return;

      const payload = {
        bundle,
        email,
        firm,
        name,
        eventId: (crypto && crypto.randomUUID) ? crypto.randomUUID() : String(Date.now()),
        priceKey: (bundle === 'credits_10') ? 'STRIPE_PRICE_CREDITS_10'
          : (bundle === 'credits_100') ? 'STRIPE_PRICE_CREDITS_100'
          : 'STRIPE_PRICE_CREDITS_25',
        quantity: 1
      };

      btn && (btn.disabled = true);
      btn && (btn.textContent = 'Redirectingâ€¦');

      fetch('https://api.taxmonitor.pro/checkout/session', {
        method: 'POST',
        headers: { 'content-type': 'application/json' },
        credentials: 'include',
        body: JSON.stringify(payload)
      }).then(async (res) => {
        const data = await res.json().catch(() => ({}));
        if (!res.ok) throw new Error(data && data.error ? data.error : 'Checkout failed');
        if (!data || !data.url) throw new Error('Missing Stripe Checkout URL');
        window.location.href = data.url;
      }).catch((err) => {
        console.error(err);
        alert('Checkout error. Please try again.');
        btn && (btn.disabled = false);
        btn && (btn.textContent = 'Continue to Secure Checkout â†’');
      });
    }

    function openTranscriptReportPreview() {
      const reportData = {
        logo: null,
        logoWidth: 140,
        taxpayerName: "John Q. Public",
        taxPeriodEnding: "12/31/2023",
        reportDate: new Date().toLocaleDateString(),
        preparedBy: "Tax Professional",
        currentBalance: "$0.00",
        refundStatus: "Issued",
        noticesIssued: "No",
        actionRequired: "No",
        riskLevel: "Low",
        summary: "The account shows a clean refund status with no outstanding balance or pending notices. All tax obligations for the 2023 tax year have been satisfied. No further action is required at this time.",
        transactions: [
          { code: "150", date: "03/15/2024", description: "Assessment - Tax Return Filed", impact: "Initial tax liability calculated and recorded" },
          { code: "290", date: "04/10/2024", description: "Withholding Applied", impact: "Federal withholding from W-2 wages credited to account" },
          { code: "846", date: "05/05/2024", description: "Refund Issued", impact: "Overpayment refunded to taxpayer via direct deposit" }
        ]
      };

      try {
        const htmlContent = generateTranscriptReportHTML(reportData);
        openReportModal(htmlContent, 'Sample Report Preview');
      } catch (e) {
        console.error('Error opening report:', e);
        alert('Error generating report. Please try again.');
      }
    }

    function openReportModal(htmlContent, titleText) {
      const overlay = document.getElementById('report-preview-overlay');
      const frame = document.getElementById('report-preview-frame');
      const title = document.getElementById('report-preview-title');

      if (!overlay || !frame) {
        // Fallback: open new tab if overlay markup is missing
        const w = window.open('', '_blank');
        if (!w) {
          alert('Pop-ups are blocked. Please enable pop-ups to preview the content.');
          return;
        }
        w.document.write(htmlContent);
        w.document.close();
        return;
      }

      if (title && titleText) title.textContent = titleText;

      // Use srcdoc mode for report HTML
      frame.removeAttribute('src');
      frame.srcdoc = htmlContent;
      overlay.classList.remove('hidden');
      document.body.style.overflow = 'hidden';

      // Focus for accessibility
      setTimeout(() => {
        const closeBtn = document.getElementById('report-preview-close');
        closeBtn && closeBtn.focus();
      }, 20);
    }

    function openReportModalFromUrl(url, titleText) {
      const overlay = document.getElementById('report-preview-overlay');
      const frame = document.getElementById('report-preview-frame');
      const title = document.getElementById('report-preview-title');

      if (!overlay || !frame) {
        window.open(url, '_blank', 'noopener');
        return;
      }

      if (title) title.textContent = titleText || 'Preview';

      // Use src mode for hosted pages
      frame.srcdoc = '';
      frame.setAttribute('src', url);
      overlay.classList.remove('hidden');
      document.body.style.overflow = 'hidden';

      setTimeout(() => {
        const closeBtn = document.getElementById('report-preview-close');
        closeBtn && closeBtn.focus();
      }, 20);
    }

    function closeReportModal() {
      const overlay = document.getElementById('report-preview-overlay');
      const frame = document.getElementById('report-preview-frame');
      const title = document.getElementById('report-preview-title');
      if (overlay) overlay.classList.add('hidden');
      if (frame) {
        frame.srcdoc = '';
        frame.removeAttribute('src');
      }
      if (title) title.textContent = 'Sample Report Preview';
      document.body.style.overflow = '';
    }

    function closeReportModal() {
      const overlay = document.getElementById('report-preview-overlay');
      const frame = document.getElementById('report-preview-frame');
      if (overlay) overlay.classList.add('hidden');
      if (frame) frame.srcdoc = '';
      document.body.style.overflow = '';
    }

    (function initReportModalControls(){
      const overlay = document.getElementById('report-preview-overlay');
      if (!overlay) return;

      overlay.addEventListener('click', (e) => {
        // Only close when clicking the backdrop, not the modal content
        if (e.target === overlay) closeReportModal();
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && overlay && !overlay.classList.contains('hidden')) {
          closeReportModal();
        }
      });
    })();

    function generateTranscriptReportHTML(data) {
      const getRiskClass = (level) => {
        if (level === "Low") return "low";
        if (level === "Moderate") return "moderate";
        return "attention";
      };

      const reportContent = `<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IRS Transcript Report</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { height: 100%; background: #f8f9fa; font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
.report-container { width: 100%; height: 100%; overflow-y: auto; padding: 32px 0; }
.report-page { width: 100%; max-width: 8.5in; height: auto; margin: 0 auto 32px; background: white; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); page-break-after: always; }
.page-content { padding: 60px; background: white; font-family: 'DM Sans', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
.report-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 20px; margin-bottom: 40px; padding-bottom: 18px; border-bottom: 2px solid #0b0a14; }
.report-header-left h1 { font-size: 30px; font-weight: 800; letter-spacing: -0.5px; line-height: 1.1; }
.report-kicker { font-size: 12px; color: #6b7280; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; margin-top: 6px; }
.report-logo { max-width: 140px; height: auto; }
.report-section { margin-bottom: 34px; }
.report-title { font-size: 13px; font-weight: 800; color: #0b0a14; text-transform: uppercase; letter-spacing: .5px; margin-bottom: 14px; padding-left: 10px; border-left: 4px solid #7c3aed; }
.report-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
.report-block { background: #f9fafb; padding: 14px; border-radius: 10px; border-left: 3px solid #7c3aed; }
.report-label { font-size: 11px; font-weight: 700; color: #6b7280; text-transform: uppercase; letter-spacing: .5px; margin-bottom: 6px; }
.report-value { font-size: 16px; font-weight: 700; color: #0b0a14; }
.report-status { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 12px; }
.report-card { background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%); padding: 18px; border-radius: 12px; border: 1px solid #e5e7eb; text-align: center; }
.report-stat { font-size: 20px; font-weight: 800; margin-bottom: 6px; min-height: 26px; }
.report-stat.low { color: #059669; }
.report-stat.moderate { color: #d97706; }
.report-stat.attention { color: #dc2626; }
.report-stat-label { font-size: 11px; font-weight: 800; color: #6b7280; text-transform: uppercase; letter-spacing: .5px; }
.report-summary { background: rgba(124,58,237,.08); border-left: 4px solid #7c3aed; padding: 18px; border-radius: 10px; line-height: 1.7; color: #374151; font-size: 14px; }
.report-timeline { margin: 0; }
.timeline-item { display: grid; grid-template-columns: 120px 1fr; gap: 20px; margin-bottom: 18px; padding-bottom: 18px; border-bottom: 1px solid #e5e7eb; }
.timeline-item:last-child { border-bottom: none; }
.timeline-date { font-size: 11px; font-weight: 800; color: #7c3aed; text-transform: uppercase; letter-spacing: .5px; }
.timeline-code { font-size: 12px; font-weight: 700; color: #6b7280; margin-top: 4px; }
.timeline-description { font-size: 14px; font-weight: 700; color: #0b0a14; margin-bottom: 4px; }
.timeline-impact { font-size: 13px; color: #6b7280; line-height: 1.5; }
.report-table { width: 100%; border-collapse: collapse; margin-top: 14px; }
.report-table thead { background: #f3f4f6; }
.report-table th { padding: 12px; text-align: left; font-size: 11px; font-weight: 800; color: #6b7280; text-transform: uppercase; letter-spacing: .5px; border: 1px solid #e5e7eb; }
.report-table td { padding: 12px; font-size: 13px; color: #374151; border: 1px solid #e5e7eb; }
.report-table tbody tr:nth-child(even) { background: #f9fafb; }
.code-column { font-family: 'Courier New', monospace; font-weight: 700; color: #7c3aed; }
.report-footer { margin-top: 40px; padding-top: 16px; border-top: 1px solid #e5e7eb; display: flex; justify-content: space-between; gap: 16px; font-size: 11px; color: #9ca3af; }
.balance-box { background: #f9fafb; border-radius: 12px; border: 1px solid #e5e7eb; padding: 20px; }
.balance-row { display: grid; grid-template-columns: 120px 1fr 100px; gap: 20px; padding: 14px 0; border-bottom: 1px solid #e5e7eb; align-items: center; }
.balance-row:last-child { border-bottom: none; }
.balance-label { font-weight: 700; color: #0b0a14; font-size: 13px; }
.balance-desc { font-size: 12px; color: #6b7280; }
.balance-amount { text-align: right; font-weight: 700; color: #0b0a14; font-size: 14px; }
.print-button { position: fixed; bottom: 20px; right: 20px; background: #7c3aed; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; z-index: 100; box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3); }
.print-button:hover { background: #6d28d9; }
@media (max-width: 640px) {
  .page-content { padding: 28px; }
  .report-grid { grid-template-columns: 1fr; }
  .report-status { grid-template-columns: 1fr; }
  .timeline-item { grid-template-columns: 1fr; }
  .balance-row { grid-template-columns: 1fr; }
}
@media print {
  body { background: white !important; }
  .print-button { display: none !important; }
  .report-container { padding: 0; }
  .report-page { margin: 0; box-shadow: none; }
  .page-content { padding: 0.5in; }
}
</style>
</head>
<body>
<div class="report-container">
  <!-- Page 1: Summary -->
  <div class="report-page">
    <div class="page-content">
      <!-- Header -->
      <div class="report-header">
        <div class="report-header-left">
          <h1>IRS Transcript Summary</h1>
          <p class="report-kicker">Client-Ready Account Analysis</p>
        </div>
        ${data.logo ? `<img src="${data.logo}" class="report-logo" />` : ''}
      </div>

      <!-- Client Information -->
      <div class="report-section">
        <div class="report-title">Client Information</div>
        <div class="report-grid">
          <div class="report-block">
            <div class="report-label">Taxpayer Name</div>
            <div class="report-value">${data.taxpayerName}</div>
          </div>
          <div class="report-block">
            <div class="report-label">Tax Period Ending</div>
            <div class="report-value">${data.taxPeriodEnding}</div>
          </div>
          <div class="report-block">
            <div class="report-label">Report Date</div>
            <div class="report-value">${data.reportDate}</div>
          </div>
          <div class="report-block">
            <div class="report-label">Prepared By</div>
            <div class="report-value">${data.preparedBy}</div>
          </div>
        </div>
      </div>

      <!-- Account Status -->
      <div class="report-section">
        <div class="report-title">Account Status</div>
        <div class="report-status">
          <div class="report-card">
            <div class="report-stat">${data.currentBalance}</div>
            <div class="report-stat-label">Current Balance</div>
          </div>
          <div class="report-card">
            <div class="report-stat">${data.refundStatus}</div>
            <div class="report-stat-label">Refund Status</div>
          </div>
          <div class="report-card">
            <div class="report-stat">${data.noticesIssued}</div>
            <div class="report-stat-label">Notices Issued</div>
          </div>
        </div>
        <div class="report-status">
          <div class="report-card">
            <div class="report-stat">${data.actionRequired}</div>
            <div class="report-stat-label">Action Required</div>
          </div>
          <div class="report-card">
            <div class="report-stat ${getRiskClass(data.riskLevel)}">${data.riskLevel}</div>
            <div class="report-stat-label">Risk Assessment</div>
          </div>
        </div>
      </div>

      <!-- Summary -->
      <div class="report-section">
        <div class="report-title">What This Means</div>
        <div class="report-summary">${data.summary}</div>
      </div>

      <!-- Timeline -->
      ${data.transactions && data.transactions.length > 0 ? `
      <div class="report-section">
        <div class="report-title">Key Transcript Events</div>
        <div class="report-timeline">
          ${data.transactions.map(tx => `
          <div class="timeline-item">
            <div>
              <div class="timeline-date">${tx.date}</div>
              <div class="timeline-code">TC ${tx.code}</div>
            </div>
            <div>
              <div class="timeline-description">${tx.description}</div>
              <div class="timeline-impact">${tx.impact}</div>
            </div>
          </div>
          `).join('')}
        </div>
      </div>
      ` : ''}

      <!-- Footer -->
      <div class="report-footer">
        <span>This report is confidential and for the named taxpayer and their representative only.</span>
        <span>Generated ${new Date().toLocaleDateString()}</span>
      </div>
    </div>
  </div>

  <!-- Page 2: Technical Analysis -->
  ${data.transactions && data.transactions.length > 0 ? `
  <div class="report-page">
    <div class="page-content">
      <!-- Header -->
      <div class="report-header">
        <div class="report-header-left">
          <h1>Technical Analysis</h1>
          <p class="report-kicker">Transaction Code Breakdown</p>
        </div>
        ${data.logo ? `<img src="${data.logo}" class="report-logo" />` : ''}
      </div>

      <!-- Transaction Details Table -->
      <div class="report-section">
        <div class="report-title">Transaction Code Details</div>
        <table class="report-table">
          <thead>
            <tr>
              <th>TC Code</th>
              <th>Date</th>
              <th>Description</th>
              <th>Impact</th>
            </tr>
          </thead>
          <tbody>
            ${data.transactions.map(tx => `
            <tr>
              <td class="code-column">${tx.code}</td>
              <td>${tx.date}</td>
              <td>${tx.description}</td>
              <td>${tx.impact}</td>
            </tr>
            `).join('')}
          </tbody>
        </table>
      </div>

      <!-- Code Meanings -->
      <div class="report-section">
        <div class="report-title">Understanding These Codes</div>
        ${data.transactions.map(tx => `
        <div style="margin-bottom: 24px; padding-bottom: 20px; border-bottom: 1px solid #e5e7eb;">
          <div style="font-weight: 700; color: #0b0a14; margin-bottom: 8px; font-size: 14px;">TC ${tx.code}: ${tx.description}</div>
          <div style="color: #6b7280; line-height: 1.6; font-size: 13px;">${tx.impact}</div>
        </div>
        `).join('')}
      </div>

      <!-- Balance Calculation -->
      <div class="report-section">
        <div class="report-title">Balance Calculation</div>
        <div class="balance-box">
          <div class="balance-row">
            <div class="balance-label">Assessment</div>
            <div class="balance-desc">Initial tax liability per return</div>
            <div class="balance-amount">â€”</div>
          </div>
          <div class="balance-row">
            <div class="balance-label">Withholding</div>
            <div class="balance-desc">Federal tax withheld from income</div>
            <div class="balance-amount">â€”</div>
          </div>
          <div class="balance-row">
            <div class="balance-label">Payments</div>
            <div class="balance-desc">Additional payments made</div>
            <div class="balance-amount">â€”</div>
          </div>
          <div class="balance-row">
            <div class="balance-label">Interest & Penalties</div>
            <div class="balance-desc">Accrued based on timing</div>
            <div class="balance-amount">â€”</div>
          </div>
          <div class="balance-row">
            <div class="balance-label">Current Balance</div>
            <div></div>
            <div class="balance-amount">${data.currentBalance}</div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="report-footer">
        <span>For IRS transaction code definitions, consult Publication 1546.</span>
        <span>Generated ${new Date().toLocaleDateString()}</span>
      </div>
    </div>
  </div>
  ` : ''}
</div>

<button class="print-button" onclick="window.print()">ðŸ–¨ï¸ Print / Save as PDF</button>
<script data-partial-loader>
(async function(){
  async function inject(el){
    const path = el.getAttribute("data-partial");
    if(!path) return;
    const res = await fetch("/" + path.replace(/^\//,""), { cache: "no-store" });
    if(!res.ok) throw new Error("Failed to load partial: " + path);
    el.outerHTML = await res.text();
  }
  const nodes = Array.from(document.querySelectorAll("[data-partial]"));
  for (const n of nodes) { await inject(n); }
})();
</script>
</body>
</html>
